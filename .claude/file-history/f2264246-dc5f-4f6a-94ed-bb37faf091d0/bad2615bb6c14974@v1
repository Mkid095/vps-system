services:
  telegram-storage:
    build: .
    container_name: nextmavens-telegram-storage
    environment:
      - PORT=4005
      - DATABASE_URL=postgresql://nextmavens:Elishiba@95@nextmavens-db-m4sxnf.1.mvuvh68efk7jnvynmv8r2jm2u:5432/nextmavens
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - TELEGRAM_WEBHOOK_URL=${TELEGRAM_WEBHOOK_URL}
      - ADMIN_CHAT_ID=${ADMIN_CHAT_ID}
    ports:
      - "4005:4005"
    restart: unless-stopped
    networks:
      - dokploy-network
    labels:
      - traefik.enable=true
      - traefik.http.routers.telegram-storage.rule=Host(`telegram.nextmavens.cloud`)
      - traefik.http.routers.telegram-storage.entrypoints=websecure
      - traefik.http.routers.telegram-storage.tls.certresolver=letsencrypt
      - traefik.http.services.telegram-storage.loadbalancer.server.port=4005

networks:
  dokploy-network:
    external: true
