---
memoryVersion: 1
schemaVersion: 1
feature: WhatsApp Integration (Evolution API)
consolidatedDate: 2026-01-24
totalStories: 10
completedStories: 0
status: initialized
---

# WhatsApp Integration (Evolution API) - Consolidated Implementation Memory

## System Overview
Self-host Evolution API v2.3.7 via Docker with multi-instance support. One WhatsApp instance per project/client. QR-based number connection, webhook support for real-time messages, and MCP server for Claude integration.

## Current Status
PRD created, waiting for execution.

## Technical Approach
- Evolution API v2.3.7 (pinned for stability)
- Multi-instance: `POST /instance/create` with {instanceName, qrcode: true}
- QR endpoint: `GET /instance/connect/qr/{instanceName}` → returns base64
- Status endpoint: `GET /instance/status/{instanceName}` → includes phone number
- Message endpoint: `POST /message/sendText/{instanceName}`
- Webhook → Next.js API route → Supabase insert → Realtime broadcast
- MCP server: stdio wrapper for Claude Desktop

## Related PRDs
- Platform Core (stores messages in project databases)
- Dashboard UI (displays QR codes and status)
- MCP Servers (WhatsApp actions)

## Stories to Implement
- US-001: Create WhatsApp Instance
- US-002: Display QR Code
- US-003: Monitor Connection Status
- US-004: Send WhatsApp Message
- US-005: Receive WhatsApp Messages
- US-006: List Messages
- US-007: WhatsApp MCP Server
- US-008: Instance Health Check
- US-009: Send Media Messages
- US-010: Webhook Signature Verification

## Memory Structure
This file will be updated as stories complete.
