{"parentUuid":"6d39f6e5-0a81-4a77-a2a8-6a03c39bdb85","isSidechain":true,"userType":"external","cwd":"/home/ken/next-mavens-flow","sessionId":"9a38dc08-79af-4ddd-b6f4-a0d29d79bf39","version":"2.1.23","gitBranch":"","agentId":"aprompt_suggestion-867306","slug":"floofy-hugging-adleman","message":{"id":"msg_20260129140001d95f849386ed4955","type":"message","role":"assistant","model":"glm-4.7","content":[{"type":"text","text":"# Maven Flow System - Comprehensive Explanation\n\n## Overview\n\n**Maven Flow** is a memory-driven autonomous AI development system for the Claude Code CLI. It implements PRD stories using a 10-step Maven workflow with specialist agents, ensuring each new feature learns from previous work through an intelligent memory ecosystem.\n\n---\n\n## System Architecture\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                          USER INTERFACE LAYER                                â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  Terminal Commands                           Claude Code Commands              â”‚\nâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚\nâ”‚  flow start           â”€â”€executesâ”€â”€â†’  /flow start                                  â”‚\nâ”‚  flow status          â”€â”€executesâ”€â”€â†’  /flow status                                 â”‚\nâ”‚  flow-prd create \"...\" â”€â”€executesâ”€â”€â†’  /flow-prd \"...\"                            â”‚\nâ”‚  flow-convert auth    â”€â”€calls skillâ†’  flow-convert docs/prd-auth.md            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                      â”‚\n                                      â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                         BASH WRAPPER LAYER (thin)                            â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  bin/flow.sh | bin/flow-prd.sh | bin/flow-convert.sh                       â”‚\nâ”‚  â€¢ Parse arguments  â€¢ Invoke Claude  â€¢ Display output                       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                      â”‚\n                                      â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                      CLAUDE CODE COMMAND/SKILL LAYER                          â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  .claude/commands/              .claude/skills/                              â”‚\nâ”‚  flow.md                        flow-convert/SKILL.md                        â”‚\nâ”‚  flow-prd.md                    flow-work-story.md                          â”‚\nâ”‚  consolidate-memory.md                                                      â”‚\nâ”‚  create-story-memory.md                                                     â”‚\nâ”‚  (AI work happens here - memory loading, agent coordination)               â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                      â”‚\n                                      â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                           SPECIALIST AGENTS LAYER                             â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  @development-agent  @refactor-agent  @quality-agent  @security-agent      â”‚\nâ”‚  @design-agent       @testing-agent   @mobile-app-agent                     â”‚\nâ”‚  (Each with isolated context, spawned by main Claude)                       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                      â”‚\n                                      â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                          AUTOMATED HOOKS LAYER                                â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  .claude/hooks/post-tool-use-quality.sh   (after every tool use)            â”‚\nâ”‚  .claude/hooks/stop-comprehensive-check.sh (before completion)             â”‚\nâ”‚  (Checks for 'any' types, gradients, imports, security)                    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## Core Concepts\n\n### 1. Multi-PRD Architecture\nEach feature has its own PRD file in `docs/prd-[feature-name].json`. The flow scans for incomplete PRDs and processes them independently.\n\n### 2. PRD-Driven Iteration\nWork through user stories one at a time with clean context. Each story specifies:\n- `mavenSteps`: Array of steps (1-11) to execute\n- `mcpTools`: Which MCP servers to use for each step\n- `acceptanceCriteria`: Verifiable requirements\n- `passes`: Completion status (true/false)\n\n### 3. Maven 10-Step Workflow\n| Step | Agent | Purpose |\n|------|-------|---------|\n| 1 | development | Foundation - Import UI or create from scratch |\n| 2 | development | Package Manager - Convert npm â†’ pnpm |\n| 3 | refactor | Feature Structure - Feature-based folders |\n| 4 | refactor | Modularization - Split components >300 lines |\n| 5 | quality | Type Safety - No 'any' types, @ aliases |\n| 6 | refactor | UI Centralization - Move to @shared/ui |\n| 7 | development | Data Layer - Backend setup, Supabase |\n| 8 | security | Auth Integration - Firebase + Supabase |\n| 9 | development | MCP Integration - Connect MCP tools |\n| 10 | security | Security & Error Handling |\n| 11 | design | Mobile Design - Professional UI (optional) |\n\n### 4. Memory Ecosystem\nThree layers of memory ensure intelligent context accumulation:\n\n**Layer 1: Story Memory** (`docs/[feature]/story-US-[###]-[title].txt`)\n- Created after each story completes\n- Contains: implemented, decisions, challenges, lessons\n\n**Layer 2: Consolidated Memory** (`docs/consolidated-[feature].txt`)\n- Created when ALL stories in PRD complete\n- ~30-50K tokens, aggressively summarized\n- Contains: architecture, interfaces, integration patterns\n\n**Layer 3: Cross-PRD Context** (assembled dynamically)\n- Related PRD summaries (~3-5K per PRD)\n- Previous story summaries (~10K total)\n- Assembled before spawning agents\n\n---\n\n## File Structure\n\n```\n/home/ken/next-mavens-flow/\nâ”œâ”€â”€ .claude/\nâ”‚   â”œâ”€â”€ commands/              # Claude Code commands\nâ”‚   â”‚   â”œâ”€â”€ flow.md            # Main flow orchestration\nâ”‚   â”‚   â”œâ”€â”€ flow-prd.md        # PRD creation\nâ”‚   â”‚   â”œâ”€â”€ flow-work-story.md # Single story processor\nâ”‚   â”‚   â”œâ”€â”€ consolidate-memory.md\nâ”‚   â”‚   â””â”€â”€ create-story-memory.md\nâ”‚   â”œâ”€â”€ skills/                # Skills (reusable workflows)\nâ”‚   â”‚   â””â”€â”€ flow-convert/      # PRD to JSON converter\nâ”‚   â”œâ”€â”€ agents/                # Specialist agent definitions\nâ”‚   â”‚   â”œâ”€â”€ development.md     # ðŸŸ¢ Foundation, data layer, MCPs\nâ”‚   â”‚   â”œâ”€â”€ refactor.md        # ðŸ”µ Structure, modularization\nâ”‚   â”‚   â”œâ”€â”€ quality.md         # ðŸŸ£ Type safety, standards\nâ”‚   â”‚   â”œâ”€â”€ security.md        # ðŸ”´ Auth, vulnerabilities\nâ”‚   â”‚   â”œâ”€â”€ design.md          # ðŸ©· Mobile UI design\nâ”‚   â”‚   â”œâ”€â”€ testing.md         # ðŸŸ  Browser testing\nâ”‚   â”‚   â””â”€â”€ mobile-app.md      # ðŸ”µ Mobile development\nâ”‚   â”œâ”€â”€ lib/                   # Shared libraries\nâ”‚   â”‚   â””â”€â”€ lock.sh            # Filesystem locking system\nâ”‚   â”œâ”€â”€ shared/                # Shared documentation\nâ”‚   â”‚   â”œâ”€â”€ prd-json-schema.md # PRD structure reference\nâ”‚   â”‚   â”œâ”€â”€ agent-patterns.md  # Common patterns for agents\nâ”‚   â”‚   â””â”€â”€ mcp-tools.md       # MCP tools reference\nâ”‚   â””â”€â”€ hooks/                 # Automated quality checks\nâ”‚       â””â”€â”€ post-tool-use-quality.sh\nâ”œâ”€â”€ bin/                       # Terminal wrapper scripts\nâ”‚   â”œâ”€â”€ flow.sh                # Main entry point\nâ”‚   â”œâ”€â”€ flow-status.sh         # Status display\nâ”‚   â”œâ”€â”€ flow-prd.sh            # PRD creation\nâ”‚   â”œâ”€â”€ flow-convert.sh        # PRD converter\nâ”‚   â””â”€â”€ test-locks.sh          # Lock system tests\nâ””â”€â”€ docs/                      # Project documentation & PRDs\n    â”œâ”€â”€ prd-[feature].json     # Machine-readable PRD\n    â”œâ”€â”€ [feature]/             # Story memories folder\n    â”‚   â””â”€â”€ story-US-[###]-[title].txt\n    â””â”€â”€ consolidated-[feature].txt\n```\n\n---\n\n## Lock System (Recently Added)\n\n### Story-Level Locking with `flock`\n\n**Purpose**: Prevent parallel sessions from working on the same story simultaneously.\n\n**Key Components**:\n- `find_and_lock_story()`: Atomically find and lock next available story\n- `unlock_story()`: Unlock a single story on completion\n- `clear_all_session_locks()`: Emergency cleanup for session abort\n- `update_session_heartbeats()`: Update heartbeat timestamps every 60s\n\n**Critical Invariants**:\n1. Only `flow.sh` mutates PRDs - workers cannot modify story state\n2. Heartbeat is source of truth - NOT time-based expiry\n3. PID + heartbeat AND logic - Both must be valid for lock ownership\n4. Never delete `.lock` files - Use `flock` exclusive mode\n\n**Configuration**:\n- `FLOW_HEARTBEAT_INTERVAL=60` - Update every 60 seconds\n- `FLOW_HEARTBEAT_TIMEOUT=300` - 5x interval = 5 minutes before stale\n\n---\n\n## Complete Workflow\n\n### Phase 1: Create PRD (Memory-Aware)\n```bash\nflow-prd create \"I want a payment processing system\"\n```\n1. Scans existing PRDs and loads consolidated memories\n2. Identifies feature relationships (depends_on, depended_by)\n3. Generates context-aware PRD with related features noted\n4. Auto-runs flow-convert\n\n### Phase 2: Convert PRD (Analyze Relationships)\n```bash\nflow-convert payments\n```\n1. Scans existing JSON PRDs\n2. Loads consolidated memories\n3. Builds `relatedPRDs` array with metadata\n4. Validates MCP availability\n5. Extracts lessons learned\n6. Creates `docs/prd-payments.json`\n\n### Phase 3: Execute Flow (With Memory Loading)\n```bash\nflow start\n```\n1. Validates prerequisites (docs/, PRD files, incomplete stories)\n2. For each incomplete story:\n   - **MEMORY LOADING PHASE**: Load relatedPRDs + previous stories\n   - **IMPLEMENTATION PHASE**: Spawn specialist agents for each mavenStep\n   - **QUALITY CHECKS**: Run typecheck and lint\n   - **MEMORY CREATION PHASE**: Create story memory file\n   - Commit changes with standardized format\n   - Mark story complete in PRD\n3. Continue until all PRDs complete\n\n---\n\n## Specialist Agents\n\n### development-agent (ðŸŸ¢ Green)\n**Use for**: Steps 1, 2, 7, 9\n- Foundation (UI import or create from scratch)\n- Package Manager (npm â†’ pnpm)\n- Data Layer (Supabase, API clients)\n- MCP Integration\n- Commit prefix: `feat:`\n\n### refactor-agent (ðŸ”µ Blue)\n**Use for**: Steps 3, 4, 6\n- Feature Structure (feature-based folders)\n- Modularization (split >300 lines)\n- UI Centralization (@shared/ui)\n- Commit prefix: `refactor:`\n\n### quality-agent (ðŸŸ£ Purple)\n**Use for**: Step 5\n- Type Safety (no 'any' types)\n- Import Aliases (@/ aliases)\n- Quality Standards compliance\n- Commit prefix: `fix:`\n\n**BLOCKING Issues**:\n- 'any' types\n- Gradients in CSS\n- Emojis in UI\n- Relative imports\n\n### security-agent (ðŸ”´ Red)\n**Use for**: Steps 8, 10\n- Auth Integration (Firebase + Supabase)\n- Security vulnerability checks\n- Error handling\n- Commit prefix: `security:`\n\n### design-agent (ðŸ©· Pink)\n**Use for**: Step 11 (optional, mobile apps)\n- Professional mobile UI/UX\n- Apple design methodology\n- Touch targets (44x44pt minimum)\n- Commit prefix: `design:`\n\n### testing-agent (ðŸŸ  Orange)\n**Use for**: `/flow test` command\n- Browser automation with chrome-devtools MCP\n- Console error checking\n- Creates error log at `docs/errors-[feature].md`\n\n### mobile-app-agent (ðŸ”µ Cyan)\n**Use for**: Mobile development (React Native + Expo)\n- Expo Router (file-based routing)\n- Offline-first (AsyncStorage + sync)\n- Native UI patterns (swipe, pull-to-refresh)\n- NativeWind styling (Tailwind)\n- Commit prefix: `mobile:`\n\n---\n\n## Feature-Based Architecture\n\n**Enforced Structure**:\n```\nsrc/\nâ”œâ”€â”€ app/                    # Entry points, routing\nâ”œâ”€â”€ features/               # Isolated feature modules\nâ”‚   â”œâ”€â”€ auth/              # Cannot import from other features\nâ”‚   â”‚   â”œâ”€â”€ api/\nâ”‚   â”‚   â”œâ”€â”€ components/\nâ”‚   â”‚   â”œâ”€â”€ hooks/\nâ”‚   â”‚   â””â”€â”€ index.ts\nâ”‚   â””â”€â”€ [feature-name]/\nâ”œâ”€â”€ shared/                # Shared code (no feature imports)\nâ”‚   â”œâ”€â”€ ui/                # Reusable components\nâ”‚   â”œâ”€â”€ api/               # Backend clients\nâ”‚   â””â”€â”€ utils/             # Utilities\n```\n\n**Architecture Rules**:\n- Features â†’ Can import from shared/ and same feature only\n- Shared â†’ Can import from shared/ only\n- App â†’ Can import from features/ and shared/\n- Use `@shared/*`, `@features/*`, `@app/*` aliases (no relative imports)\n\n---\n\n## Quality Hooks\n\n**Post-Tool-Use Hook** (runs after every Write/Edit):\n- âœ… Relative imports â†’ Auto-fix to @ aliases\n- âœ… 'any' types â†’ Should use proper types\n- âœ… Gradients â†’ Should use solid colors\n- âœ… File size >300 lines â†’ Needs modularization\n- âœ… Direct API calls â†’ Should use data layer\n- âœ… UI duplication â†’ Should use @shared/ui\n- âœ… Exposed secrets â†’ Security risk\n\n**Stop Hook** (runs before completion):\n- Large components (>300 lines)\n- Type safety ('any' count)\n- Import path violations\n- Feature boundary violations\n- UI component duplication\n- Security scan (secrets, tokens)\n\n---\n\n## Zero Tolerance Rules\n\n1. **'any' Types - ZERO TOLERANCE**\n   - No `: any`, `: any[]`, `<any>`, `Promise<any>`\n   - Use proper interfaces or `unknown` with type guards\n\n2. **Gradients in CSS - ZERO TOLERANCE**\n   - No `linear-gradient`, `radial-gradient`, `conic-gradient`\n   - Use solid professional colors only\n\n3. **Emojis in UI - ZERO TOLERANCE**\n   - No emojis anywhere in UI components\n   - Use professional icon libraries (lucide-react, heroicons)\n\n4. **Relative Imports**\n   - No `import { Foo } from './foo'` or `../bar`\n   - Use `@/` aliases for all imports\n\n---\n\n## Commands Reference\n\n| Command | Description | Usage |\n|---------|-------------|-------|\n| `flow start [n]` | Start autonomous development | `flow start 10` |\n| `flow status` | Show progress across all PRDs | `flow status` |\n| `flow continue [prd] [n]` | Resume from last iteration | `flow continue auth 5` |\n| `flow reset [prd]` | Archive and reset a PRD | `flow reset auth` |\n| `flow test [prd]` | Test implemented features | `flow test auth` |\n| `flow consolidate [prd]` | Fix errors from testing | `flow consolidate auth` |\n| `flow-prd create \"...\"` | Create memory-aware PRD | `flow-prd create auth` |\n| `flow-convert [feature]` | Convert PRD to JSON | `flow-convert auth` |\n\n---\n\n## Testing & Consolidation Workflow\n\n1. **Test** (`/flow test`): Comprehensive testing, creates error log\n2. **Review** (`docs/errors-[feature].md`): Check error log\n3. **Consolidate** (`/flow consolidate`): Fix specific errors only\n4. **Re-test**: Verify all errors fixed\n\n---\n\n## Mobile Development Support\n\n**Tech Stack**:\n- React Native + Expo SDK 51\n- Expo Router (file-based routing)\n- NativeWind (Tailwind)\n- TanStack Query + Zustand\n- Firebase Auth + FCM\n- Supabase (shared backend)\n\n**Key Features**:\n- Offline-first architecture (AsyncStorage + auto-sync)\n- Native UI patterns (pull-to-refresh, swipe actions, bottom sheets)\n- Touch targets (44x44pt minimum)\n- Push notifications (FCM)\n- Shared backend with web app\n\n---\n\n## Installation & Setup\n\n```bash\n# Clone the repository\ngit clone https://github.com/Mkid095/next-mavens-flow.git\n\n# Run install script\n./install.sh\n\n# Start using\nflow start\n```\n\n---\n\n## Key Files Reference\n\n| File | Purpose |\n|------|---------|\n| `bin/flow.sh` | Main entry point, coordination loop |\n| `.claude/lib/lock.sh` | Filesystem locking functions |\n| `.claude/commands/flow.md` | Main flow orchestration logic |\n| `.claude/shared/prd-json-schema.md` | PRD structure reference |\n| `.claude/shared/agent-patterns.md` | Common patterns for all agents |\n| `.claude/agents/*.md` | Individual agent definitions |\n| `bin/flow-status.sh` | Status display with lock info |\n\n---\n\nThis is the complete Maven Flow system. It's a sophisticated autonomous development platform that combines PRD-driven development, intelligent memory management, specialist agents, quality enforcement, and filesystem-coordinated locking to enable reliable parallel AI development sessions."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"output_tokens":0}},"type":"assistant","uuid":"adbea942-4bd3-44ab-a73c-3a776886b94c","timestamp":"2026-01-29T06:00:36.995Z"}
{"parentUuid":"adbea942-4bd3-44ab-a73c-3a776886b94c","isSidechain":true,"userType":"external","cwd":"/home/ken/next-mavens-flow","sessionId":"9a38dc08-79af-4ddd-b6f4-a0d29d79bf39","version":"2.1.23","gitBranch":"","agentId":"aprompt_suggestion-867306","slug":"floofy-hugging-adleman","type":"user","message":{"role":"user","content":"[SUGGESTION MODE: Suggest what the user might naturally type next into Claude Code.]\n\nFIRST: Look at the user's recent messages and original request.\n\nYour job is to predict what THEY would type - not what you think they should do.\n\nTHE TEST: Would they think \"I was just about to type that\"?\n\nEXAMPLES:\nUser asked \"fix the bug and run tests\", bug is fixed â†’ \"run the tests\"\nAfter code written â†’ \"try it out\"\nClaude offers options â†’ suggest the one the user would likely pick, based on conversation\nClaude asks to continue â†’ \"yes\" or \"go ahead\"\nTask complete, obvious follow-up â†’ \"commit this\" or \"push it\"\nAfter error or misunderstanding â†’ silence (let them assess/correct)\n\nBe specific: \"run the tests\" beats \"continue\".\n\nNEVER SUGGEST:\n- Evaluative (\"looks good\", \"thanks\")\n- Questions (\"what about...?\")\n- Claude-voice (\"Let me...\", \"I'll...\", \"Here's...\")\n- New ideas they didn't ask about\n- Multiple sentences\n\nStay silent if the next step isn't obvious from what the user said.\n\nFormat: 2-8 words, match the user's style. Or nothing.\n\nReply with ONLY the suggestion, no quotes or explanation."},"uuid":"88f9dead-e2bc-417c-98cc-bcfc0959cff0","timestamp":"2026-01-29T06:00:37.001Z"}
{"parentUuid":"88f9dead-e2bc-417c-98cc-bcfc0959cff0","isSidechain":true,"userType":"external","cwd":"/home/ken/next-mavens-flow","sessionId":"9a38dc08-79af-4ddd-b6f4-a0d29d79bf39","version":"2.1.23","gitBranch":"","agentId":"aprompt_suggestion-867306","slug":"floofy-hugging-adleman","message":{"id":"msg_2026012914003929258bc22b0e494f","type":"message","role":"assistant","model":"glm-4.7","content":[{"type":"thinking","thinking":"The user just received a comprehensive explanation of Maven Flow. They asked for a comprehensive explanation, and I provided it. \n\nNow I need to predict what they might naturally type next. Let me consider:\n\n1. The user asked for information, not a task\n2. They might want to explore specific parts in more detail\n3. They might want to try running the system\n4. They might have follow-up questions\n5. They might want to see something work\n\nGiven they just got a comprehensive explanation, natural next steps could be:\n- \"run the test suite\" - to see the locks in action\n- \"flow status\" - to check the current state of their project\n- \"start a new flow\" - to try using the system\n- \"explain the lock system\" - but I just covered that\n- \"show me an example\" - to see how it works\n\nSince they have the lock system test available and I mentioned it works, a natural follow-up might be to want to see it in action. Or they might want to check their project status.\n\nLooking at what they originally asked - \"comprehensively explain everything about mavens flow system\" - this was a knowledge request. After getting a comprehensive explanation, a natural next step would be to either:\n1. Try it out: \"flow start\" or \"run the tests\"\n2. Check current state: \"flow status\"\n3. Ask for clarification on something specific\n\nI think \"flow status\" is a strong candidate - it's the natural first thing someone would run after learning about a system to see what's currently happening.\n\nAlternatively, since I mentioned the lock test passed, they might want to see it: \"run the test again\" or \"test the locks\"\n\nActually, looking more carefully - this is their project. After getting a comprehensive explanation, they'd likely want to see the current state of their project. \"flow status\" makes the most sense.","signature":""}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"output_tokens":0}},"type":"assistant","uuid":"712ea34c-a5b2-4683-b22c-70d3ae980d3b","timestamp":"2026-01-29T06:00:45.782Z"}
{"parentUuid":"712ea34c-a5b2-4683-b22c-70d3ae980d3b","isSidechain":true,"userType":"external","cwd":"/home/ken/next-mavens-flow","sessionId":"9a38dc08-79af-4ddd-b6f4-a0d29d79bf39","version":"2.1.23","gitBranch":"","agentId":"aprompt_suggestion-867306","slug":"floofy-hugging-adleman","message":{"id":"msg_2026012914003929258bc22b0e494f","type":"message","role":"assistant","model":"glm-4.7","content":[{"type":"text","text":"flow status"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":0,"output_tokens":0}},"type":"assistant","uuid":"3507e280-c9bd-45ca-9465-8e1b66e29d4a","timestamp":"2026-01-29T06:00:45.786Z"}
