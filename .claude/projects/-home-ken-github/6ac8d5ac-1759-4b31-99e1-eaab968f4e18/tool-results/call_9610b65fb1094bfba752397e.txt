     1â†’---
     2â†’description: Run Maven Flow - autonomous AI development with PRD-driven iteration and 10-step workflow
     3â†’argument-hint: start [max-iterations] | status | continue [prd-name] | reset [prd-name] | test [prd-name] | consolidate [prd-name] | help
     4â†’---
     5â†’
     6â†’# Maven Flow
     7â†’
     8â†’Autonomous AI development flow that implements PRD stories using the Maven 10-Step Workflow. Supports multiple feature PRDs with automatic story tracking and completion.
     9â†’
    10â†’**Multi-PRD Architecture:** Each feature has its own `docs/prd-[feature-name].json` file. The flow automatically scans for incomplete PRDs and processes them in order.
    11â†’
    12â†’## Commands
    13â†’
    14â†’### Start a new flow
    15â†’```
    16â†’/flow start [max-iterations]
    17â†’```
    18â†’
    19â†’**CRITICAL: This command runs AUTOMATICALLY until ALL stories complete**
    20â†’
    21â†’**Architecture:** The `/flow` command (running in main Claude context) coordinates ALL specialist agent spawning directly. Subagents are NOT used for coordination since they cannot spawn other subagents.
    22â†’
    23â†’---
    24â†’
    25â†’## Prerequisites Check
    26â†’
    27â†’Before starting, the command validates:
    28â†’
    29â†’1. **`docs/` directory exists**
    30â†’   - If missing: `âŒ Error: No docs/ directory found.`
    31â†’   - Fix: Create the directory: `mkdir docs`
    32â†’
    33â†’2. **PRD files exist** (`docs/prd-*.json`)
    34â†’   - If missing: `âŒ Error: No PRD files found in docs/.`
    35â†’   - Fix: Create a PRD first using the `flow-prd` skill:
    36â†’     ```
    37â†’     Tell me you want to create a PRD for [feature]
    38â†’     Example: "Create a PRD for a user authentication feature"
    39â†’     ```
    40â†’
    41â†’3. **At least one incomplete story**
    42â†’   - If all PRDs complete: `âœ… All PRDs complete! No work to do.`
    43â†’   - Fix: Create a new PRD or add stories to existing PRD
    44â†’
    45â†’4. **Maven Flow wrapper script** (optional, for local execution)
    46â†’   - The flow can create `maven-flow.sh` locally for direct execution
    47â†’   - This wrapper is created automatically when needed
    48â†’   - If you encounter syntax errors, delete `maven-flow.sh` and let flow recreate it
    49â†’
    50â†’---
    51â†’
    52â†’When you execute `/flow start` or `/flow continue`:
    53â†’
    54â†’## EXACT EXECUTION INSTRUCTIONS (READ CAREFULLY):
    55â†’
    56â†’**You MUST invoke specialist agents using the @agent-name syntax. Each agent runs in its own isolated context window.**
    57â†’
    58â†’### For each story, execute each mavenStep by invoking the appropriate agent:
    59â†’
    60â†’**Step 1, 2, 7, 9 (Development):**
    61â†’```
    62â†’@development-agent
    63â†’
    64â†’You are working on Step [N] of Maven Workflow for story: [US-XXX - Story title]
    65â†’
    66â†’PRD: docs/prd-[feature].json
    67â†’MCPs to use for this step: [from mcpTools.mcpTools.step[N]]
    68â†’
    69â†’## Your Task (Step [N]):
    70â†’[Detailed step requirements from PRD acceptance criteria]
    71â†’
    72â†’## Quality Standards (ZERO TOLERANCE):
    73â†’- No 'any' types - use proper TypeScript
    74â†’- No gradients - use solid professional colors
    75â†’- No relative imports - use @/ aliases
    76â†’- Components < 300 lines
    77â†’
    78â†’When complete, output: [STEP_COMPLETE]
    79â†’```
    80â†’
    81â†’**Step 3, 4, 6 (Refactor):**
    82â†’```
    83â†’@refactor-agent
    84â†’[Same prompt structure as above]
    85â†’```
    86â†’
    87â†’**Step 5 (Quality):**
    88â†’```
    89â†’@quality-agent
    90â†’[Same prompt structure as above]
    91â†’```
    92â†’
    93â†’**Step 8, 10 (Security):**
    94â†’```
    95â†’@security-agent
    96â†’[Same prompt structure as above]
    97â†’```
    98â†’
    99â†’**Step 11 (Design):**
   100â†’```
   101â†’@design-agent
   102â†’[Same prompt structure as above]
   103â†’```
   104â†’
   105â†’### Wait for agent completion before proceeding to next step
   106â†’
   107â†’### After all steps complete:
   108â†’1. Run: `pnpm run typecheck` (or `pnpm tsc`)
   109â†’2. Update PRD: Set `passes: true` for the story
   110â†’3. Commit: `git add . && git commit -m "feat: [US-XXX] [title]"`
   111â†’4. Output: `<STORY_COMPLETE>`
   112â†’
   113â†’### Then move to next incomplete story
   114â†’
   115â†’**DO NOT STOP. Continue automatically until ALL stories complete.**
   116â†’
   117â†’---
   118â†’
   119â†’Now continue with the standard flow:
   120â†’   - Wait for agent to complete before spawning next
   121â†’   - Continue until all mavenSteps are done
   122â†’5. Run quality checks, commit, update PRD
   123â†’6. **Repeat automatically** for next story
   124â†’7. Continue until ALL PRDs have ALL stories passing
   125â†’8. Do NOT wait for user input between stories
   126â†’9. Do NOT stop after one story - keep going until ALL are complete
   127â†’
   128â†’**Example:**
   129â†’```
   130â†’/flow start 15
   131â†’```
   132â†’
   133â†’**How it works:**
   134â†’1. Scans for all `docs/prd-*.json` files
   135â†’2. For each PRD, checks if all stories have `passes: true`
   136â†’3. Finds the first PRD with incomplete stories
   137â†’4. For each incomplete story (in priority order):
   138â†’
   139â†’   **MEMORY LOADING PHASE:**
   140â†’   - Read PRD's `relatedPRDs` array
   141â†’   - Load consolidated memory from each related PRD (if any)
   142â†’   - Pre-analyze and summarize relevant sections (~3-5K tokens)
   143â†’   - Load previous story memories from same PRD (~10K tokens)
   144â†’   - Create story session with proper context structure
   145â†’
   146â†’   **IMPLEMENTATION PHASE:**
   147â†’   - Read story's mavenSteps array
   148â†’   - Read story's mcpTools (if specified for each step)
   149â†’   - **Spawn specialist agents using @agent-name syntax:**
   150â†’     - Step 1, 2, 7, 9 â†’ @development-agent
   151â†’     - Step 3, 4, 6 â†’ @refactor-agent
   152â†’     - Step 5 â†’ @quality-agent
   153â†’     - Step 8, 10 â†’ @security-agent
   154â†’     - Step 11 â†’ @design-agent [optional, for mobile apps]
   155â†’   - **Tell agent which MCPs to use with EXPLICIT INSTRUCTIONS at the start of prompt:**
   156â†’     ```
   157â†’     *** CRITICAL: MCP TOOLS INSTRUCTION ***
   158â†’     You MUST use the Supabase MCP tools for ALL database operations.
   159â†’     DO NOT read migration files or create scripts.
   160â†’     SCAN FIRST - Use MCP to list/check what exists in the database BEFORE making any changes.
   161â†’     Query the database DIRECTLY using Supabase MCP tools.
   162â†’
   163â†’     Story: US-POS-001, Step 1
   164â†’     MCPs: supabase
   165â†’     ```
   166â†’   - Wait for each agent to complete
   167â†’   - Run quality checks (typecheck, lint)
   168â†’
   169â†’   **MEMORY CREATION PHASE (MANDATORY - DO NOT SKIP!):**
   170â†’
   171â†’   This phase is CRITICAL for the memory system. You MUST execute it for EVERY completed story.
   172â†’
   173â†’   **Mandatory Steps:**
   174â†’   1. **Create feature folder:** `mkdir -p docs/[feature]/`
   175â†’   2. **Create story memory file:** `docs/[feature]/story-US-[###]-[title].txt`
   176â†’   3. **Include:**
   177â†’      - What was implemented (specific files, functions, components)
   178â†’      - Key decisions made (architecture choices, design patterns)
   179â†’      - Technical challenges encountered and how they were resolved
   180â†’      - Integration points with other features
   181â†’      - Lessons learned for future work
   182â†’   4. **Update PRD JSON:** Set `passes: true` for the completed story
   183â†’   5. **Commit changes** with proper format: `feat: [story-id] [story-title]`
   184â†’   6. **Output signal:** Output the `<STORY_COMPLETE>` signal to indicate completion
   185â†’
   186â†’   **Memory file format:**
   187â†’   ```markdown
   188â†’   ---
   189â†’   memoryVersion: 1
   190â†’   schemaVersion: 1
   191â†’   storyId: US-001
   192â†’   storyTitle: [Title]
   193â†’   feature: [Feature]
   194â†’   completedDate: [Date]
   195â†’   agents: development-agent, security-agent
   196â†’   ---
   197â†’
   198â†’   # Story US-001: [Title]
   199â†’
   200â†’   ## Implemented
   201â†’   - List what was actually implemented
   202â†’
   203â†’   ## Key Decisions
   204â†’   - Architecture decisions made
   205â†’
   206â†’   ## Challenges Resolved
   207â†’   - Problems encountered and solutions
   208â†’
   209â†’   ## Integration Points
   210â†’   - How this connects to other features
   211â†’
   212â†’   ## Lessons Learned
   213â†’   - Important takeaways for future work
   214â†’   ```
   215â†’
   216â†’   **âš ï¸ WARNING:** Do NOT skip or defer memory creation. The memory system depends on these files being created after each story.
   217â†’
   218â†’5. Move to next incomplete story
   219â†’
   220â†’6. **CONSOLIDATION PHASE (when ALL stories in PRD complete):**
   221â†’
   222â†’   When ALL stories in the PRD have `passes: true`, you MUST update the consolidated memory file.
   223â†’
   224â†’   **Mandatory Steps:**
   225â†’   1. **Read all story memory files** from `docs/[feature]/story-US-*.txt`
   226â†’   2. **Update the consolidated memory file:** `docs/consolidated-[feature].txt`
   227â†’      - Read existing content first
   228â†’      - Append new consolidated information (don't overwrite)
   229â†’      - Update totals: `totalStories` and `completedStories` to actual counts
   230â†’      - Set `status: completed`
   231â†’      - Update `consolidatedDate` to current date
   232â†’   3. **Target ~15K tokens** - Aggressively summarize to stay within limit
   233â†’   4. **Focus on:** Patterns, decisions, interfaces, integration points
   234â†’   5. **Output:** `<ALL_COMPLETE>` signal
   235â†’
   236â†’   **Consolidated Memory Format:**
   237â†’   ```markdown
   238â†’   ---
   239â†’   memoryVersion: 1
   240â†’   schemaVersion: 1
   241â†’   feature: [Feature Name]
   242â†’   consolidatedDate: [Updated Date]
   243â†’   totalStories: 5
   244â†’   completedStories: 5
   245â†’   status: completed
   246â†’   ---
   247â†’
   248â†’   # [Feature Name] - Consolidated Implementation Memory
   249â†’
   250â†’   ## System Overview
   251â†’   [Brief overview of what was implemented]
   252â†’
   253â†’   ## Key Architectural Decisions
   254â†’   [All technical decisions from all stories]
   255â†’
   256â†’   ## Public Interfaces
   257â†’   [All API endpoints, UI components, integrations]
   258â†’
   259â†’   ## Integration Patterns
   260â†’   [How this feature connects to other PRDs]
   261â†’
   262â†’   ## Related PRDs
   263â†’   [Which PRDs depend on or are related to this one]
   264â†’
   265â†’   ## Consolidated From Stories
   266â†’   US-001: [Title] | US-002: [Title] | ...
   267â†’   ```
   268â†’
   269â†’   **âš ï¸ IMPORTANT:** This UPDATES the existing `docs/consolidated-[feature].txt` file that was created by flow-prd. Do NOT overwrite - UPDATE it by reading first, then updating the fields.
   270â†’
   271â†’7. Continue to next incomplete PRD until all PRDs complete
   272â†’8. Default: 10 iterations (stories) unless specified
   273â†’
   274â†’### Check status
   275â†’```
   276â†’/flow status
   277â†’```
   278â†’- Lists all PRD files in `docs/`
   279â†’- Shows completion status for each PRD
   280â†’- Displays stories (completed/pending) for each PRD
   281â†’- Shows progress summary from each `docs/progress-[feature-name].txt`
   282â†’
   283â†’**Example output:**
   284â†’```
   285â†’Maven Flow Status: 3 PRD files found
   286â†’
   287â†’prd-task-priority.json (3/5 complete)
   288â†’  âœ“ US-001: Add priority field to database
   289â†’  âœ“ US-002: Display priority indicator
   290â†’  âœ“ US-003: Add priority selector
   291â†’  â—‹ US-004: Filter tasks by priority (priority: 4)
   292â†’  â—‹ US-005: Add priority sorting (priority: 5)
   293â†’
   294â†’prd-user-auth.json (0/4 complete)
   295â†’  â—‹ US-001: Firebase authentication setup
   296â†’  â—‹ US-002: Supabase profile storage
   297â†’  â—‹ US-003: Login form UI
   298â†’  â—‹ US-004: Password reset flow
   299â†’
   300â†’prd-notifications.json (4/4 complete) âœ…
   301â†’  âœ“ All stories complete
   302â†’
   303â†’Current focus: prd-task-priority.json
   304â†’
   305â†’Recent progress:
   306â†’  [2025-01-10] prd-task-priority.json - US-003 Added priority dropdown
   307â†’  Agents: refactor-agent, quality-agent
   308â†’```
   309â†’
   310â†’### Continue flow
   311â†’```
   312â†’/flow continue [max-iterations]
   313â†’/flow continue [prd-name] [max-iterations]
   314â†’```
   315â†’- Resumes from last iteration
   316â†’- Continues with current PRD (default) or specified PRD
   317â†’- Continues with remaining stories where `passes: false`
   318â†’- Useful when flow was interrupted
   319â†’
   320â†’**Examples:**
   321â†’```
   322â†’/flow continue          # Continue with current PRD
   323â†’/flow continue 5        # Continue with 5 more iterations
   324â†’/flow continue task-priority  # Continue specific PRD
   325â†’```
   326â†’
   327â†’### Reset flow
   328â†’```
   329â†’/flow reset
   330â†’/flow reset [prd-name]
   331â†’```
   332â†’- Archives specified PRD run to `archive/YYYY-MM-DD-[feature-name]/`
   333â†’- Resets `docs/prd-[feature-name].json` and `docs/progress-[feature-name].txt`
   334â†’- If no PRD specified, prompts to select which PRD to reset
   335â†’- Prompts for confirmation before archiving
   336â†’
   337â†’**Examples:**
   338â†’```
   339â†’/flow reset              # Prompts to select PRD
   340â†’/flow reset task-priority  # Reset specific PRD
   341â†’```
   342â†’
   343â†’### Test application
   344â†’```
   345â†’/flow test [prd-name]
   346â†’```
   347â†’- Runs comprehensive testing of all implemented features
   348â†’- Uses testing-agent with chrome-devtools MCP
   349â†’- Tests all completed stories (where `passes: true`)
   350â†’- Creates error log at `docs/errors-[feature-name].md`
   351â†’- Uses standard test user: `revccnt@gmail.com` / `Elishiba!90`
   352â†’
   353â†’**Process:**
   354â†’1. Reads PRD to find completed stories
   355â†’2. Starts dev server: `pnpm dev`
   356â†’3. Opens application using chrome-devtools MCP
   357â†’4. Tests user signup/login
   358â†’5. Tests each completed feature's acceptance criteria
   359â†’6. Checks console for errors
   360â†’7. Logs all errors found with details
   361â†’8. Creates error log markdown file
   362â†’
   363â†’**What gets tested:**
   364â†’- User authentication (signup, login, logout)
   365â†’- All completed stories' acceptance criteria
   366â†’- Console errors (JavaScript, network, API)
   367â†’- UI functionality
   368â†’- Navigation between pages
   369â†’- Form submissions
   370â†’- Data display
   371â†’
   372â†’**Error log format:** `docs/errors-[feature-name].md`
   373â†’- Each error with story ID, severity, error message
   374â†’- Steps to reproduce
   375â†’- Expected vs actual behavior
   376â†’- Related file references
   377â†’- Suggested fixes
   378â†’
   379â†’**Examples:**
   380â†’```bash
   381â†’/flow test                    # Test current PRD (auto-detects)
   382â†’/flow test authentication     # Test authentication PRD
   383â†’/flow test task-priority      # Test task-priority PRD
   384â†’```
   385â†’
   386â†’**After testing:**
   387â†’- Review error log: `docs/errors-[feature-name].md`
   388â†’- Run `/flow consolidate [prd-name]` to fix errors
   389â†’
   390â†’---
   391â†’
   392â†’### Consolidate and fix errors
   393â†’```
   394â†’/flow consolidate [prd-name]
   395â†’```
   396â†’- Reads error log from `docs/errors-[feature-name].md`
   397â†’- Identifies which stories/steps have errors
   398â†’- Re-runs ONLY the affected steps (not entire stories)
   399â†’- Fixes specific errors found during testing
   400â†’- Does NOT reimplement completed features
   401â†’
   402â†’**Process:**
   403â†’1. Read error log: `docs/errors-[feature-name].md`
   404â†’2. Parse each error to identify:
   405â†’   - Which story (US-XXX) has the error
   406â†’   - Which step/mavenStep needs to be re-run
   407â†’   - What the specific error is
   408â†’3. For each error:
   409â†’   - Spawn appropriate agent (development, quality, security, etc.)
   410â†’   - Tell agent exactly what error to fix
   411â†’   - Wait for fix to be applied
   412â†’4. Re-test ONLY the fixed item
   413â†’5. Mark error as resolved in log
   414â†’6. Continue until all errors fixed
   415â†’
   416â†’**What it does NOT do:**
   417â†’- Does NOT run full mavenSteps again
   418â†’- Does NOT re-implement completed features
   419â†’- Does NOT touch working code
   420â†’- Only fixes the specific errors identified
   421â†’
   422â†’**Examples:**
   423â†’```bash
   424â†’/flow consolidate            # Consolidate current PRD
   425â†’/flow consolidate auth       # Consolidate authentication PRD
   426â†’```
   427â†’
   428â†’**Output:**
   429â†’- Shows which errors are being fixed
   430â†’- Shows which agent is handling each fix
   431â†’- Commits each fix separately
   432â†’- Updates error log as fixes are applied
   433â†’
   434â†’---
   435â†’
   436â†’### Help
   437â†’```
   438â†’/flow help
   439â†’```
   440â†’- Displays comprehensive help information
   441â†’- Shows detailed command reference, workflow, and troubleshooting
   442â†’
   443â†’---
   444â†’
   445â†’# Comprehensive Guide
   446â†’
   447â†’## Table of Contents
   448â†’1. [Quick Start](#quick-start)
   449â†’2. [Command Reference](#command-reference)
   450â†’3. [Maven 10-Step Workflow](#maven-10-step-workflow)
   451â†’4. [Specialist Agents](#specialist-agents)
   452â†’5. [MCP Tool Assignment](#mcp-tool-assignment)
   453â†’6. [Quality Standards](#quality-standards)
   454â†’7. [Browser Testing](#browser-testing)
   455â†’8. [Required MCPs](#required-mcps)
   456â†’9. [Testing & Consolidation](#testing--consolidation)
   457â†’10. [Mobile Development](#mobile-development)
   458â†’11. [Common Workflows](#common-workflows)
   459â†’12. [Troubleshooting](#troubleshooting)
   460â†’
   461â†’---
   462â†’
   463â†’## Quick Start
   464â†’
   465â†’### For New Users
   466â†’
   467â†’**Step 1: Create your first PRD**
   468â†’```
   469â†’Tell me you want to create a PRD for [feature description]
   470â†’Example: "Create a PRD for a user authentication system"
   471â†’```
   472â†’
   473â†’**Step 2: Convert to JSON format**
   474â†’```
   475â†’/flow-convert
   476â†’```
   477â†’This creates `docs/prd-[feature-name].json`
   478â†’
   479â†’**Step 3: Start autonomous development**
   480â†’```
   481â†’/flow start
   482â†’```
   483â†’
   484â†’The flow will:
   485â†’- Scan for all incomplete PRDs
   486â†’- Process each story automatically
   487â†’- Spawn specialist agents for each step
   488â†’- Commit changes with proper format
   489â†’- Continue until ALL stories are complete
   490â†’
   491â†’**Step 4: Monitor progress**
   492â†’```
   493â†’/flow status
   494â†’```
   495â†’
   496â†’---
   497â†’
   498â†’## Command Reference
   499â†’
   500â†’### `/flow start [max-iterations]`
   501â†’Starts autonomous flow execution.
   502â†’
   503â†’**Parameters:**
   504â†’- `max-iterations` (optional): Number of stories to process (default: 10)
   505â†’
   506â†’**Behavior:**
   507â†’- Scans for all PRD files in `docs/`
   508â†’- Identifies incomplete stories (`passes: false`)
   509â†’- Processes stories in priority order
   510â†’- Spawns specialist agents for each mavenStep
   511â†’- Runs quality checks after each story
   512â†’- Commits changes with standardized format
   513â†’- Updates PRD to mark story complete
   514â†’- Continues to next story automatically
   515â†’
   516â†’**Examples:**
   517â†’```bash
   518â†’/flow start          # Process up to 10 stories (default)
   519â†’/flow start 20       # Process up to 20 stories
   520â†’/flow start 1        # Process exactly 1 story then stop
   521â†’```
   522â†’
   523â†’**What happens during execution:**
   524â†’1. Validates prerequisites (docs/, PRD files, incomplete stories)
   525â†’2. Lists all PRD files found
   526â†’3. Shows which PRD will be processed first
   527â†’4. For each incomplete story:
   528â†’   - Displays story ID and title
   529â†’   - Shows mavenSteps to be executed
   530â†’   - Shows MCPs assigned for each step
   531â†’   - Spawns agents one at a time
   532â†’   - Waits for each agent to complete
   533â†’   - Runs typecheck and lint
   534â†’   - Creates git commit
   535â†’   - Marks story as complete in PRD
   536â†’5. Moves to next story automatically
   537â†’6. Continues until max iterations or all PRDs complete
   538â†’
   539â†’### `/flow status`
   540â†’Shows current status of all PRDs.
   541â†’
   542â†’**Output includes:**
   543â†’- Total PRD files found
   544â†’- Completion status for each PRD
   545â†’- List of all stories with completion status
   546â†’- Recent progress from progress files
   547â†’
   548â†’**Example output:**
   549â†’```
   550â†’Maven Flow Status: 3 PRD files found
   551â†’
   552â†’prd-task-priority.json (3/5 complete)
   553â†’  âœ“ US-001: Add priority field to database
   554â†’  âœ“ US-002: Display priority indicator
   555â†’  âœ“ US-003: Add priority selector
   556â†’  â—‹ US-004: Filter tasks by priority (priority: 4)
   557â†’  â—‹ US-005: Add priority sorting (priority: 5)
   558â†’
   559â†’prd-user-auth.json (0/4 complete)
   560â†’  â—‹ US-001: Firebase authentication setup
   561â†’  â—‹ US-002: Supabase profile storage
   562â†’  â—‹ US-003: Login form UI
   563â†’  â—‹ US-004: Password reset flow
   564â†’
   565â†’prd-notifications.json (4/4 complete) âœ…
   566â†’
   567â†’Current focus: prd-task-priority.json
   568â†’
   569â†’Recent progress:
   570â†’  [2025-01-10] prd-task-priority.json - US-003 Added priority dropdown
   571â†’```
   572â†’
   573â†’### `/flow continue [prd-name] [max-iterations]`
   574â†’Resumes flow execution from where it left off.
   575â†’
   576â†’**Parameters:**
   577â†’- `prd-name` (optional): Specific PRD to process (default: current)
   578â†’- `max-iterations` (optional): Number of stories to process
   579â†’
   580â†’**When to use:**
   581â†’- After fixing an error that stopped the flow
   582â†’- After manually editing PRD or code
   583â†’- To continue with a specific PRD
   584â†’- To process more stories than originally planned
   585â†’
   586â†’**Examples:**
   587â†’```bash
   588â†’/flow continue           # Continue with current PRD
   589â†’/flow continue 5         # Process 5 more stories
   590â†’/flow continue auth 10   # Process auth PRD for 10 stories
   591â†’```
   592â†’
   593â†’### `/flow reset [prd-name]`
   594â†’Archives current PRD run and resets for fresh start.
   595â†’
   596â†’**Parameters:**
   597â†’- `prd-name` (optional): Specific PRD to reset (prompts if omitted)
   598â†’
   599â†’**Behavior:**
   600â†’- Creates archive: `archive/YYYY-MM-DD-[feature-name]/`
   601â†’- Moves current PRD and progress file to archive
   602â†’- Resets all stories to `passes: false`
   603â†’- Creates fresh PRD and progress files
   604â†’- Prompts for confirmation before archiving
   605â†’
   606â†’**Examples:**
   607â†’```bash
   608â†’/flow reset           # Prompts to select PRD
   609â†’/flow reset auth      # Reset auth PRD specifically
   610â†’```
   611â†’
   612â†’**When to use:**
   613â†’- PRD has fundamental issues
   614â†’- Want to start over with different approach
   615â†’- Need to archive current progress before major changes
   616â†’
   617â†’---
   618â†’
   619â†’## Maven 10-Step Workflow
   620â†’
   621â†’Each story is implemented through specific steps, each handled by a specialist agent.
   622â†’
   623â†’| Step | Agent | Description | Duration |
   624â†’|------|-------|-------------|----------|
   625â†’| 1 | development-agent | Foundation - Import UI or create from scratch | ~5-10 min |
   626â†’| 2 | development-agent | Package Manager - Convert npm â†’ pnpm | ~2-5 min |
   627â†’| 3 | refactor-agent | Feature Structure - Restructure folders | ~5-10 min |
   628â†’| 4 | refactor-agent | Modularization - Split large components | ~5-15 min |
   629â†’| 5 | quality-agent | Type Safety - Remove 'any' types, add @ aliases | ~5-10 min |
   630â†’| 6 | refactor-agent | UI Centralization - Move to @shared/ui | ~5-10 min |
   631â†’| 7 | development-agent | Data Layer - Backend setup, Supabase integration | ~10-20 min |
   632â†’| 8 | security-agent | Auth Integration - Firebase + Supabase auth | ~10-15 min |
   633â†’| 9 | development-agent | MCP Integration - Connect MCP tools | ~5-10 min |
   634â†’| 10 | security-agent | Security & Error Handling | ~10-15 min |
   635â†’| 11 | design-agent | Mobile Design - Professional UI (optional) | ~15-20 min |
   636â†’
   637â†’**Total typical story duration:** 1-2 hours depending on complexity
   638â†’
   639â†’**Step dependencies:**
   640â†’- Steps must be completed in order
   641â†’- Each step builds on previous steps
   642â†’- Quality checks run after all steps complete
   643â†’
   644â†’---
   645â†’
   646â†’## Specialist Agents
   647â†’
   648â†’### development-agent (ğŸŸ¢ Green)
   649â†’**Use for:** Steps 1, 2, 7, 9
   650â†’
   651â†’**Responsibilities:**
   652â†’- Import UI with mock data or create from scratch
   653â†’- Convert package manager (npm â†’ pnpm)
   654â†’- Set up data layer (Supabase, API clients)
   655â†’- Integrate MCP tools
   656â†’- Set up project foundation
   657â†’
   658â†’**Key actions:**
   659â†’- Creates base components with mock data
   660â†’- Installs and configures Supabase client
   661â†’- Sets up API middleware
   662â†’- Connects MCP tools (web-search, web-reader, browser)
   663â†’- Commits with prefix `feat:`
   664â†’
   665â†’### refactor-agent (ğŸ”µ Blue)
   666â†’**Use for:** Steps 3, 4, 6
   667â†’
   668â†’**Responsibilities:**
   669â†’- Restructure to feature-based architecture
   670â†’- Modularize large components
   671â†’- Centralize UI components to @shared/ui
   672â†’
   673â†’**Key actions:**
   674â†’- Moves code to feature-based folders
   675â†’- Splits components >300 lines
   676â†’- Extracts reusable UI components
   677â†’- Enforces architecture rules
   678â†’- Commits with prefix `refactor:`
   679â†’
   680â†’### quality-agent (ğŸŸ£ Purple)
   681â†’**Use for:** Step 5
   682â†’
   683â†’**Responsibilities:**
   684â†’- Type safety enforcement
   685â†’- Import alias verification
   686â†’- Quality standards compliance
   687â†’
   688â†’**Key actions:**
   689â†’- Removes ALL 'any' types (zero tolerance)
   690â†’- Converts relative imports to @ aliases
   691â†’- Verifies component sizes
   692â†’- Blocks on quality violations
   693â†’- Auto-fixes import paths
   694â†’- Commits with prefix `fix:`
   695â†’
   696â†’**BLOCKING Issues:**
   697â†’- 'any' types in code
   698â†’- Gradients in CSS
   699â†’- Emojis in UI components
   700â†’- Relative imports
   701â†’
   702â†’### security-agent (ğŸ”´ Red)
   703â†’**Use for:** Steps 8, 10
   704â†’
   705â†’**Responsibilities:**
   706â†’- Authentication flow implementation
   707â†’- Security vulnerability checks
   708â†’- Error handling setup
   709â†’
   710â†’**Key actions:**
   711â†’- Firebase Auth integration
   712â†’- Supabase Row-Level Security (RLS)
   713â†’- JWT validation
   714â†’- Input sanitization
   715â†’- Error boundary implementation
   716â†’- Commits with prefix `security:`
   717â†’
   718â†’### design-agent (ğŸ©· Pink)
   719â†’**Use for:** Step 11 (optional, mobile apps only)
   720â†’
   721â†’**Responsibilities:**
   722â†’- Professional mobile UI/UX design
   723â†’- Apple design methodology application
   724â†’
   725â†’**Key actions:**
   726â†’- Applies professional visual design
   727â†’- Implements proper navigation patterns
   728â†’- Ensures touch targets (44x44pt minimum)
   729â†’- Validates in Expo preview
   730â†’- Commits with prefix `design:`
   731â†’
   732â†’### testing-agent (ğŸŸ  Orange)
   733â†’**Use for:** `/flow test` command (not part of mavenSteps)
   734â†’
   735â†’**Responsibilities:**
   736â†’- Comprehensive application testing
   737â†’- Error logging and reporting
   738â†’- Browser automation with chrome-devtools MCP
   739â†’
   740â†’**Key actions:**
   741â†’- Opens application using chrome-devtools MCP
   742â†’- Tests all completed stories (where `passes: true`)
   743â†’- Tests signup/login with standard test user
   744â†’- Checks console for errors (logs ALL errors found)
   745â†’- Tests each acceptance criterion
   746â†’- Creates error log at `docs/errors-[feature-name].md`
   747â†’- Reports testing results with error counts and severity
   748â†’
   749â†’**Required MCP:**
   750â†’- chrome-devtools (REQUIRED - cannot test without it)
   751â†’
   752â†’**Test Credentials:**
   753â†’- Email: `revccnt@gmail.com`
   754â†’- Password: `Elishiba!90`
   755â†’
   756â†’**Commit prefix:** `test:` (only commits if making test fixes)
   757â†’
   758â†’---
   759â†’
   760â†’### mobile-app-agent (ğŸ”µ Cyan)
   761â†’**Use for:** Mobile development (React Native + Expo apps)
   762â†’
   763â†’**Responsibilities:**
   764â†’- Mobile screen implementation with Expo Router
   765â†’- Offline-first data management with TanStack Query
   766â†’- Native UI patterns (swipe, pull-to-refresh, bottom sheets)
   767â†’- NativeWind styling (Tailwind for React Native)
   768â†’- Push notifications with Firebase Cloud Messaging
   769â†’- Touch-optimized interactions (44pt minimum)
   770â†’
   771â†’**Key actions:**
   772â†’- Creates mobile screens in `mobile/app/` folder
   773â†’- Implements offline support with AsyncStorage
   774â†’- Uses NativeWind utility classes for styling
   775â†’- Integrates Firebase Cloud Messaging for push notifications
   776â†’- Implements native UI patterns (pull-to-refresh, swipe actions)
   777â†’- Tests with Expo Go or device simulators
   778â†’- Uses same Supabase backend as web app
   779â†’- Commits with prefix `mobile:`
   780â†’
   781â†’**Required MCPs:**
   782â†’- supabase (REQUIRED - shared backend with web)
   783â†’- web-search-prime (Recommended - for mobile best practices)
   784â†’
   785â†’**Mobile Location:**
   786â†’- Works in `mobile/` folder
   787â†’- Mobile PRDs in `mobile/docs/prd-*.json`
   788â†’- Uses Expo Router (file-based routing)
   789â†’- TypeScript with strict mode
   790â†’
   791â†’**Server Management:**
   792â†’- Expo server runs on port 8081
   793â†’- Stop ONLY Expo process, not all Node processes
   794â†’- Use: `kill -9 $(lsof -ti:8081)`
   795â†’
   796â†’**Tech Stack:**
   797â†’- Frontend: React Native + Expo
   798â†’- Navigation: Expo Router
   799â†’- Styling: NativeWind (Tailwind)
   800â†’- State: TanStack Query + Zustand
   801â†’- Auth: Firebase Authentication
   802â†’- Backend: Supabase (shared with web)
   803â†’- Push: Firebase Cloud Messaging
   804â†’- Offline: AsyncStorage with sync
   805â†’
   806â†’
   807â†’## MCP Tool Assignment
   808â†’
   809â†’### What are MCPs?
   810â†’MCPs (Model Context Protocol) extend Claude with external tools like databases, web search, and browser automation.
   811â†’
   812â†’### How MCP Assignment Works
   813â†’
   814â†’**1. PRD specifies MCPs per step:**
   815â†’```json
   816â†’{
   817â†’  "id": "US-001",
   818â†’  "mavenSteps": [1, 7],
   819â†’  "mcpTools": {
   820â†’    "step1": ["supabase"],
   821â†’    "step7": ["supabase", "web-search-prime"]
   822â†’  }
   823â†’}
   824â†’```
   825â†’
   826â†’**2. Flow tells agent which MCPs to use:**
   827â†’```
   828â†’*** CRITICAL: MCP TOOLS INSTRUCTION ***
   829â†’You MUST use the Supabase MCP tools for ALL database operations.
   830â†’SCAN FIRST - Use MCP to list/check what exists in the database BEFORE making changes.
   831â†’Query the database DIRECTLY using Supabase MCP tools.
   832â†’
   833â†’Story: US-001, Step 1
   834â†’MCPs: supabase
   835â†’```
   836â†’
   837â†’**3. Agent uses those MCPs:**
   838â†’- Checks if MCPs are available in their tool set
   839â†’- Uses MCP tools directly to query database, run migrations, etc.
   840â†’- Falls back to standard tools only if MCPs unavailable
   841â†’
   842â†’### Available MCPs
   843â†’
   844â†’| MCP Name | Purpose | Steps Used For |
   845â†’|----------|---------|----------------|
   846â†’| supabase | Database operations | 1, 7, 8, 10 |
   847â†’| web-search-prime | Research, documentation | All steps |
   848â†’| web-reader | Read web content | All steps |
   849â†’| chrome-devtools | Browser testing | Testing phases |
   850â†’| playwright | Browser automation | Testing phases |
   851â†’| vercel | Deployment to Vercel | 9 |
   852â†’| wrangler | Deployment to Cloudflare | 9 |
   853â†’| figma | Design work | 11 |
   854â†’
   855â†’**MCP Usage Rules:**
   856â†’- **SCAN FIRST** - Always list/check what exists before making changes
   857â†’- **Query directly** - Use MCP tools, don't read migration files
   858â†’- **Verify in actual database** - Don't trust type files, verify with MCP
   859â†’- **Fall back gracefully** - Use standard tools if MCP unavailable
   860â†’
   861â†’---
   862â†’
   863â†’## Required Files
   864â†’
   865â†’| File | Purpose |
   866â†’|------|---------|
   867â†’| `docs/prd-[feature-name].json` | Feature PRD with user stories, acceptance criteria, and pass/fail status |
   868â†’| `docs/progress-[feature-name].txt` | Append-only log of learnings and context for each feature |
   869â†’| `AGENTS.md` | Codebase patterns and conventions (auto-updated during flow) |
   870â†’
   871â†’## Maven 10-Step Workflow (Plus Optional Design Step)
   872â†’
   873â†’Each story is implemented using the Maven workflow:
   874â†’
   875â†’| Step | Agent | Color | Description |
   876â†’|------|-------|-------|-------------|
   877â†’| **1** | development-agent | ğŸŸ¢ Green | Import UI with mock data or create from scratch |
   878â†’| **2** | development-agent | ğŸŸ¢ Green | Convert npm â†’ pnpm |
   879â†’| **3** | refactor-agent | ğŸ”µ Blue | Restructure to feature-based folder structure |
   880â†’| **4** | refactor-agent | ğŸ”µ Blue | Modularize components >300 lines |
   881â†’| **5** | quality-agent | ğŸŸ£ Purple | Type safety - no 'any' types, @ aliases |
   882â†’| **6** | refactor-agent | ğŸ”µ Blue | Centralize UI components to @shared/ui |
   883â†’| **7** | development-agent | ğŸŸ¢ Green | Centralized data layer with backend setup |
   884â†’| **8** | security-agent | ğŸ”´ Red | Firebase + Supabase authentication flow |
   885â†’| **9** | development-agent | ğŸŸ¢ Green | MCP integrations (web-search, web-reader, chrome, expo, supabase) |
   886â†’| **10** | security-agent | ğŸ”´ Red | Security and error handling |
   887â†’| **11** | design-agent | ğŸ©· Pink | **Mobile Design** - Professional UI/UX for Expo/React Native (optional) |
   888â†’
   889â†’**Step 11 is optional** and specifically for mobile app (Expo/React Native) projects. It applies Apple's design methodology to transform basic UIs into professional, polished mobile experiences.
   890â†’
   891â†’## Workflow
   892â†’
   893â†’1. **Create PRD** - Use the `flow-prd` skill to generate requirements
   894â†’2. **Convert to JSON** - Use the `flow-convert` skill to create `docs/prd-[feature-name].json`
   895â†’3. **Start Flow** - Run `/flow start` to begin autonomous iteration
   896â†’4. **Monitor Progress** - Use `/flow status` to check all PRDs
   897â†’5. **Review Results** - Each story is committed separately with descriptive messages
   898â†’
   899â†’## How It Works
   900â†’
   901â†’### Multi-PRD Processing
   902â†’
   903â†’When you run `/flow start`:
   904â†’
   905â†’1. **Scan Phase:** The flow scans `docs/` for all `prd-*.json` files
   906â†’2. **Priority Phase:** For each PRD, checks completion status:
   907â†’   - Loads JSON and checks if all stories have `passes: true`
   908â†’   - Identifies PRDs with incomplete stories (`passes: false`)
   909â†’3. **Selection Phase:** Picks the first incomplete PRD (alphabetically by filename)
   910â†’4. **Iteration Phase:** Processes that PRD's stories one by one:
   911â†’   - Reads PRD JSON and picks highest priority story where `passes: false`
   912â†’   - Reads story's `mavenSteps` array
   913â†’   - **Spawns specialist agents directly** (one per mavenStep)
   914â†’   - Waits for each agent to complete
   915â†’   - Runs quality checks
   916â†’   - Commits changes
   917â†’   - Updates PRD to `passes: true`
   918â†’   - Appends learnings to progress file
   919â†’5. **Completion Phase:** When PRD is complete (all `passes: true`):
   920â†’   - Marks PRD as complete
   921â†’   - Moves to next incomplete PRD
   922â†’   - Repeats iteration phase
   923â†’6. **Final Phase:** When all PRDs are complete:
   924â†’   - Outputs completion summary
   925â†’
   926â†’### Maven Step to Agent Mapping
   927â†’
   928â†’The `/flow` command maps each step in the story's `mavenSteps` array to the appropriate specialist agent:
   929â†’
   930â†’| Maven Step | Agent Type | Task subagent_type | Description |
   931â†’|------------|------------|-------------------|-------------|
   932â†’| 1 | Foundation | development-agent | Import UI with mock data or create from scratch |
   933â†’| 2 | Package Manager | development-agent | Convert npm â†’ pnpm |
   934â†’| 3 | Feature Structure | refactor-agent | Restructure to feature-based folder structure |
   935â†’| 4 | Modularization | refactor-agent | Modularize components >300 lines |
   936â†’| 5 | Type Safety | quality-agent | Type safety - no 'any' types, @ aliases |
   937â†’| 6 | UI Centralization | refactor-agent | Centralize UI components to @shared/ui |
   938â†’| 7 | Data Layer | development-agent | Centralized data layer with backend setup |
   939â†’| 8 | Auth Integration | security-agent | Firebase + Supabase authentication flow |
   940â†’| 9 | MCP Integration | development-agent | MCP integrations (web-search, web-reader, chrome, expo, supabase) |
   941â†’| 10 | Security & Error Handling | security-agent | Security and error handling |
   942â†’| 11 | Mobile Design | design-agent | Professional UI/UX for Expo/React Native (optional) |
   943â†’
   944â†’### Story Processing Flow
   945â†’
   946â†’For each incomplete story:
   947â†’
   948â†’```markdown
   949â†’## Story: [Story ID] - [Story Title]
   950â†’
   951â†’**From PRD:**
   952â†’- mavenSteps: [1, 3, 5, 7]
   953â†’- mcpTools: { step1: ["supabase"], step7: ["supabase", "web-search-prime"] }
   954â†’- Description: [Story description]
   955â†’- Acceptance Criteria: [List from PRD]
   956â†’
   957â†’**Processing:**
   958â†’
   959â†’1. [Step 1 - Foundation]
   960â†’   Spawning development agent...
   961â†’   Instruction: "Use these MCPs: supabase"
   962â†’   INSTRUCTION: USE SUPABASE MCP TOOLS to query/verify database directly. DO NOT just read type files.
   963â†’   â†’ [Waiting for completion]
   964â†’   â†’ [Agent completed successfully]
   965â†’
   966â†’2. [Step 3 - Feature Structure]
   967â†’   Spawning refactor agent...
   968â†’   â†’ [Waiting for completion]
   969â†’   â†’ [Agent completed successfully]
   970â†’
   971â†’3. [Step 5 - Type Safety]
   972â†’   Spawning quality agent...
   973â†’   â†’ [Waiting for completion]
   974â†’   â†’ [Agent completed successfully]
   975â†’
   976â†’4. [Step 7 - Data Layer]
   977â†’   Spawning development agent...
   978â†’   Instruction: "Use these MCPs: supabase, web-search-prime"
   979â†’   INSTRUCTION: USE SUPABASE MCP TOOLS to query/verify database directly. USE WEB-SEARCH for research.
   980â†’   â†’ [Waiting for completion]
   981â†’   â†’ [Agent completed successfully]
   982â†’
   983â†’5. Running quality checks...
   984â†’   pnpm run typecheck
   985â†’   â†’ Passed
   986â†’
   987â†’6. Committing changes...
   988â†’   git commit -m "feat: [Story ID] - [Story Title]
   989â†’
   990â†’Co-Authored-By: NEXT MAVENS <info@nextmavens.com>"
   991â†’   â†’ Committed
   992â†’
   993â†’7. Updating PRD...
   994â†’   Setting passes: true for [Story ID]
   995â†’   â†’ Updated
   996â†’
   997â†’8. Logging progress...
   998â†’   Appending to docs/progress-[feature].txt
   999â†’   â†’ Logged
  1000â†’
  1001â†’âœ… Story [Story ID] complete
  1002â†’```
  1003â†’
  1004â†’**IMPORTANT: MCP Assignment**
  1005â†’
  1006â†’The PRD file specifies which MCPs to use for each step:
  1007â†’
  1008â†’```json
  1009â†’{
  1010â†’  "id": "US-001",
  1011â†’  "mavenSteps": [1, 7],
  1012â†’  "mcpTools": {
  1013â†’    "step1": ["supabase"],
  1014â†’    "step7": ["supabase", "web-search-prime"]
  1015â†’  }
  1016â†’}
  1017â†’```
  1018â†’
  1019â†’**How it works:**
  1020â†’1. Read the PRD's `mcpTools` for the current step
  1021â†’2. Tell the agent: "Use these MCPs: [list]"
  1022â†’3. Agent figures out how to use them
  1023â†’4. If MCPs aren't specified, agent uses standard tools
  1024â†’
  1025â†’**Simple and direct:**
  1026â†’- No complex discovery or categorization
  1027â†’- No merging or mapping logic
  1028â†’- Just pass the MCP names to the agent
  1029â†’- Agent knows their own tools and how to use them
  1030â†’
  1031â†’## Feature-Based Architecture
  1032â†’
  1033â†’Maven Flow enforces this structure for all new code:
  1034â†’
  1035â†’```
  1036â†’src/
  1037â†’â”œâ”€â”€ app/                    # Entry points, routing
  1038â†’â”œâ”€â”€ features/               # Isolated feature modules
  1039â†’â”‚   â”œâ”€â”€ auth/              # Cannot import from other features
  1040â†’â”‚   â”œâ”€â”€ dashboard/
  1041â†’â”‚   â””â”€â”€ [feature-name]/
  1042â†’â”œâ”€â”€ shared/                # Shared code (no feature imports)
  1043â†’â”‚   â”œâ”€â”€ ui/                # Reusable components
  1044â†’â”‚   â”œâ”€â”€ api/               # Backend clients
  1045â†’â”‚   â””â”€â”€ utils/             # Utilities
  1046â†’```
  1047â†’
  1048â†’**Architecture Rules:**
  1049â†’- Features â†’ Cannot import from other features
  1050â†’- Features â†’ Can import from shared/
  1051â†’- Shared â†’ Cannot import from features
  1052â†’- Use `@shared/*`, `@features/*`, `@app/*` aliases (no relative imports)
  1053â†’
  1054â†’## Tips
  1055â†’
  1056â†’- **Multiple features:** Create separate PRDs for each feature using `flow-prd` skill
  1057â†’- **Story size:** Keep stories small enough for one context window (~30-50 files max)
  1058â†’- **Dependencies:** Order stories by dependency (schema â†’ backend â†’ UI)
  1059â†’- **Quality hooks:** Automatically configured in `maven-flow/.claude/settings.json`
  1060â†’- **Browser verification:** UI stories should include browser testing steps
  1061â†’- **Agent coordination:** The /flow command directly spawns specialist agents for each mavenStep
  1062â†’
  1063â†’### Mobile App Development (Expo/React Native)
  1064â†’
  1065â†’- **Step 11 (design-agent)**: Add to stories for mobile apps to apply professional UI/UX design
  1066â†’- **Design principles**: Based on Apple's design methodology (Structure, Navigation, Content, Visual Design)
  1067â†’- **Expo integration**: Design-agent validates changes using Expo preview
  1068â†’- **When to use**: Include Step 11 in mavenSteps for stories that create or modify mobile UI screens
  1069â†’- **Example PRD story for mobile**:
  1070â†’  ```json
  1071â†’  {
  1072â†’    "id": "US-001",
  1073â†’    "title": "Create mobile home screen",
  1074â†’    "mavenSteps": [1, 3, 5, 6, 11],
  1075â†’    "description": "Create the main home screen for the mobile app"
  1076â†’  }
  1077â†’  ```
  1078â†’
  1079â†’## Quality Standards
  1080â†’
  1081â†’### Zero Tolerance Rules
  1082â†’
  1083â†’**The following violations will BLOCK commits:**
  1084â†’
  1085â†’1. **'any' Types - ZERO TOLERANCE**
  1086â†’   - No `: any`, `: any[]`, `<any>`, `Promise<any>`
  1087â†’   - Use proper interfaces or `unknown` with type guards
  1088â†’
  1089â†’2. **Gradients in CSS - ZERO TOLERANCE**
  1090â†’   - No `linear-gradient`, `radial-gradient`, `conic-gradient`
  1091â†’   - Use solid professional colors only
  1092â†’
  1093â†’3. **Emojis in UI - ZERO TOLERANCE**
  1094â†’   - No emojis anywhere in UI components
  1095â†’   - Use professional icon libraries (lucide-react, heroicons)
  1096â†’   - Never use emojis as icons or in text
  1097â†’
  1098â†’4. **Relative Imports**
  1099â†’   - No `import { Foo } from './foo'` or `../bar`
  1100â†’   - Use `@/` aliases for all imports
  1101â†’
  1102â†’### Component Size Limits
  1103â†’
  1104â†’- **Maximum 300 lines** per component
  1105â†’- Components larger than 300 lines must be split
  1106â†’- Flagged for refactoring agent to modularize
  1107â†’
  1108â†’### Professional Color Palette
  1109â†’
  1110â†’**Semantic Colors:**
  1111â†’```css
  1112â†’--color-primary: #3b82f6;      /* Blue */
  1113â†’--color-success: #10b981;      /* Green */
  1114â†’--color-warning: #f59e0b;      /* Amber */
  1115â†’--color-error: #ef4444;        /* Red */
  1116â†’--color-neutral: #6b7280;      /* Gray */
  1117â†’```
  1118â†’
  1119â†’**Rules:**
  1120â†’- Use semantic color names
  1121â†’- No hard-coded hex values
  1122â†’- No gradients (solid colors only)
  1123â†’
  1124â†’### Import Path Rules
  1125â†’
  1126â†’**âœ… CORRECT:**
  1127â†’```tsx
  1128â†’import { Button } from '@shared/ui';
  1129â†’import { useAuth } from '@features/auth/hooks';
  1130â†’import { apiClient } from '@/shared/api';
  1131â†’```
  1132â†’
  1133â†’**âŒ BLOCKED:**
  1134â†’```tsx
  1135â†’import { Button } from '../../../shared/ui';
  1136â†’import { useAuth } from '../hooks';
  1137â†’```
  1138â†’
  1139â†’---
  1140â†’
  1141â†’## Browser Testing
  1142â†’
  1143â†’### Test User Credentials (Standard Across All Projects)
  1144â†’
  1145â†’**Email:** `revccnt@gmail.com`
  1146â†’**Password:** `Elishiba!90`
  1147â†’
  1148â†’### Testing Process
  1149â†’
  1150â†’**For ALL web applications with browser MCPs:**
  1151â†’
  1152â†’1. **Start dev server:** `pnpm dev`
  1153â†’2. **Navigate to application** using browser MCP
  1154â†’3. **Check browser console** for errors and warnings
  1155â†’4. **Check Network tab** for failed API calls
  1156â†’5. **Test all user flows** with standard test user
  1157â†’6. **Fix any console errors** found
  1158â†’7. **Re-test** to verify clean console
  1159â†’
  1160â†’### Console Log Verification
  1161â†’
  1162â†’**ALWAYS read console logs. Common issues to fix:**
  1163â†’
  1164â†’| Issue | Example | Fix |
  1165â†’|-------|---------|-----|
  1166â†’| ReferenceError | `Uncaught ReferenceError: foo is not defined` | Import or define the variable |
  1167â†’| TypeError | `Cannot read property 'x' of undefined` | Add null checks |
  1168â†’| Failed to fetch | `Failed to fetch: /api/endpoint` | Check API route exists |
  1169â†’| CORS | `CORS policy: No 'Access-Control-Allow-Origin'` | Configure CORS headers |
  1170â†’| 404 / 500 | API returns error status | Fix backend endpoint |
  1171â†’
  1172â†’### Role Switching (Multi-Role Apps)
  1173â†’
  1174â†’**Do NOT create separate accounts for each role. Use role switching:**
  1175â†’
  1176â†’1. Log in as `revccnt@gmail.com`
  1177â†’2. Use role switcher in application
  1178â†’3. Change roles: SUPER_ADMIN â†’ SHOP_OWNER â†’ SHOP_EMPLOYEE
  1179â†’4. Test each role's features
  1180â†’5. Switch back and forth as needed
  1181â†’
  1182â†’---
  1183â†’
  1184â†’## Required MCPs
  1185â†’
  1186â†’### Mandatory MCPs for Maven Flow
  1187â†’
  1188â†’Maven Flow requires specific MCP servers to be configured for autonomous development and testing to function correctly.
  1189â†’
  1190â†’#### Two Mandatory MCPs
  1191â†’
  1192â†’**1. Supabase MCP (MANDATORY)**
  1193â†’- **Purpose:** Direct database access, schema verification, migrations, type generation
  1194â†’- **Why mandatory:**
  1195â†’  - Agents need to QUERY the actual database (not read files)
  1196â†’  - Agents need to VERIFY tables and schema exist
  1197â†’  - Agents need to CREATE tables and run migrations
  1198â†’  - Agents need to GENERATE TypeScript types from live schema
  1199â†’- **Without Supabase MCP:**
  1200â†’  - Agents will fall back to reading migration files (doesn't verify actual database)
  1201â†’  - Agents will create migration scripts manually (error-prone)
  1202â†’  - Agents cannot verify what's actually in the database
  1203â†’
  1204â†’**2. chrome-devtools MCP (MANDATORY)**
  1205â†’- **Purpose:** Live browser testing, console log reading, application verification
  1206â†’- **Why mandatory:**
  1207â†’  - testing-agent MUST open the application to test features
  1208â†’  - Agents MUST read console logs to find errors
  1209â†’  - Agents MUST verify UI works in real browser
  1210â†’  - Agents MUST test user flows end-to-end
  1211â†’- **Without chrome-devtools MCP:**
  1212â†’  - testing-agent cannot test the application
  1213â†’  - Console errors go undetected
  1214â†’  - Features cannot be verified in browser
  1215â†’  - Testing becomes manual and incomplete
  1216â†’
  1217â†’#### How to Verify MCPs Are Configured
  1218â†’
  1219â†’**Before running `/flow start`:**
  1220â†’
  1221â†’1. **Check Claude Code MCP Settings:**
  1222â†’   - Open Claude Code Settings
  1223â†’   - Go to MCP Servers section
  1224â†’   - Verify "supabase" is in the list
  1225â†’   - Verify "chrome-devtools" is in the list
  1226â†’
  1227â†’2. **Test MCPs are working:**
  1228â†’   - Start a conversation
  1229â†’   - Ask agent to list tables using Supabase MCP
  1230â†’   - Ask agent to open browser using chrome-devtools MCP
  1231â†’
  1232â†’3. **If MCPs are missing:**
  1233â†’   - DO NOT start `/flow start`
  1234â†’   - Configure the missing MCP first
  1235â†’   - Restart Claude Code
  1236â†’   - Verify again
  1237â†’
  1238â†’#### Optional MCPs (Recommended but Not Required)
  1239â†’
  1240â†’| MCP Name | Purpose | When to Include |
  1241â†’|----------|---------|-----------------|
  1242â†’| web-search-prime | Research documentation | All steps |
  1243â†’| web-reader | Read web pages | All steps |
  1244â†’| playwright | Browser automation testing | Testing phases |
  1245â†’| wrangler | Cloudflare Workers deployment | Step 9 |
  1246â†’| vercel | Vercel deployment | Step 9 |
  1247â†’| figma | Design work | Step 11 (mobile) |
  1248â†’
  1249â†’**Only include these MCPs if:**
  1250â†’- They are actually configured in your environment
  1251â†’- The story specifically needs them
  1252â†’- You've verified they're available
  1253â†’
  1254â†’#### Summary
  1255â†’
  1256â†’**MANDATORY MCPs (Must Have):**
  1257â†’- âœ… supabase
  1258â†’- âœ… chrome-devtools
  1259â†’
  1260â†’**Before running `/flow start`:**
  1261â†’1. Verify supabase MCP is configured
  1262â†’2. Verify chrome-devtools MCP is configured
  1263â†’3. Test both MCPs work correctly
  1264â†’4. Only then start the flow
  1265â†’
  1266â†’**Remember:** Without these MCPs, Maven Flow cannot function as designed. Agents will fall back to less reliable methods (reading files instead of querying database, manual testing instead of automated browser testing).
  1267â†’
  1268â†’---
  1269â†’
  1270â†’## Testing & Consolidation
  1271â†’
  1272â†’### Workflow: Test â†’ Log â†’ Consolidate â†’ Fix
  1273â†’
  1274â†’Maven Flow includes a systematic testing and error consolidation workflow to ensure quality.
  1275â†’
  1276â†’### Step 1: Test (`/flow test`)
  1277â†’
  1278â†’**Purpose:** Comprehensive automated testing of all completed features
  1279â†’
  1280â†’**What happens:**
  1281â†’1. Reads PRD to find completed stories (where `passes: true`)
  1282â†’2. Starts dev server: `pnpm dev`
  1283â†’3. Opens application using chrome-devtools MCP
  1284â†’4. Tests user signup/login with standard test credentials
  1285â†’5. Tests each completed feature's acceptance criteria
  1286â†’6. Checks console for errors (logs ALL errors found)
  1287â†’7. Tests navigation, forms, data display
  1288â†’8. Creates error log at `docs/errors-[feature-name].md`
  1289â†’
  1290â†’**Standard Test User:**
  1291â†’- Email: `revccnt@gmail.com`
  1292â†’- Password: `Elishiba!90`
  1293â†’
  1294â†’**What gets tested:**
  1295â†’- User authentication (signup, login, logout)
  1296â†’- All completed stories' acceptance criteria
  1297â†’- Console errors (JavaScript, network, API)
  1298â†’- UI functionality
  1299â†’- Navigation between pages
  1300â†’- Form submissions
  1301â†’- Data display
  1302â†’
  1303â†’**Example:**
  1304â†’```bash
  1305â†’/flow test task-priority
  1306â†’```
  1307â†’
  1308â†’**Output:**
  1309â†’- Shows which features are being tested
  1310â†’- Reports errors in real-time
  1311â†’- Creates error log markdown file
  1312â†’- Summary with error counts by severity
  1313â†’
  1314â†’### Step 2: Review Error Log
  1315â†’
  1316â†’**Error log format:** `docs/errors-[feature-name].md`
  1317â†’
  1318â†’**Each error includes:**
  1319â†’- Story ID (US-XXX)
  1320â†’- Severity (Critical / High / Medium / Low)
  1321â†’- Error type (Console Error / Network Error / UI Issue)
  1322â†’- Error message (exact text from console)
  1323â†’- Steps to reproduce
  1324â†’- Expected vs actual behavior
  1325â†’- Related file references
  1326â†’- Suggested fixes
  1327â†’
  1328â†’**Example error log entry:**
  1329â†’```markdown
  1330â†’## Error 1
  1331â†’
  1332â†’**Story:** US-003 - Add priority selector
  1333â†’**Feature:** Task creation form
  1334â†’**Severity:** High
  1335â†’
  1336â†’**Error Type:** Console Error
  1337â†’
  1338â†’**Error Message:**
  1339â†’```
  1340â†’Uncaught TypeError: Cannot read property 'map' of undefined
  1341â†’at PrioritySelector.tsx:24
  1342â†’```
  1343â†’
  1344â†’**Steps to Reproduce:**
  1345â†’1. Navigate to /tasks/create
  1346â†’2. Click on "Priority" dropdown
  1347â†’3. Observe error in console
  1348â†’
  1349â†’**Expected Behavior:**
  1350â†’Priority dropdown shows options: Low, Medium, High, Urgent
  1351â†’
  1352â†’**Actual Behavior:**
  1353â†’Application crashes, dropdown doesn't render
  1354â†’
  1355â†’**Related Files:**
  1356â†’- File: src/features/tasks/components/PrioritySelector.tsx
  1357â†’- Line: 24
  1358â†’- Component: PrioritySelector
  1359â†’
  1360â†’**Suggested Fix:**
  1361â†’Check that priorities prop is defined before mapping. Add default value or null check.
  1362â†’```
  1363â†’
  1364â†’### Step 3: Consolidate (`/flow consolidate`)
  1365â†’
  1366â†’**Purpose:** Fix ONLY the specific errors found during testing (NOT reimplement features)
  1367â†’
  1368â†’**What happens:**
  1369â†’1. Reads error log from `docs/errors-[feature-name].md`
  1370â†’2. Parses each error to identify:
  1371â†’   - Which story (US-XXX) has the error
  1372â†’   - Which step/mavenStep needs to be re-run
  1373â†’   - What the specific error is
  1374â†’3. For each error:
  1375â†’   - Spawns appropriate specialist agent (development, quality, security, etc.)
  1376â†’   - Tells agent exactly what error to fix
  1377â†’   - Waits for fix to be applied
  1378â†’4. Re-tests ONLY the fixed item
  1379â†’5. Marks error as resolved in log
  1380â†’6. Continues until all errors fixed
  1381â†’
  1382â†’**What it does NOT do:**
  1383â†’- Does NOT run full mavenSteps again
  1384â†’- Does NOT re-implement completed features
  1385â†’- Does NOT touch working code
  1386â†’- Only fixes the specific errors identified
  1387â†’
  1388â†’**Example:**
  1389â†’```bash
  1390â†’/flow consolidate task-priority
  1391â†’```
  1392â†’
  1393â†’**Output:**
  1394â†’- Shows which errors are being fixed
  1395â†’- Shows which agent is handling each fix
  1396â†’- Commits each fix separately
  1397â†’- Updates error log as fixes are applied
  1398â†’
  1399â†’### Step 4: Re-test
  1400â†’
  1401â†’After consolidation:
  1402â†’1. Run `/flow test [prd-name]` again
  1403â†’2. Verify all errors are fixed
  1404â†’3. Verify console is clean
  1405â†’4. If errors remain, repeat consolidation
  1406â†’
  1407â†’### Complete Workflow Example
  1408â†’
  1409â†’```bash
  1410â†’# 1. Run development flow
  1411â†’/flow start
  1412â†’
  1413â†’# 2. Test all completed features
  1414â†’/flow test task-priority
  1415â†’
  1416â†’# Output: Testing Complete
  1417â†’# Error Log: docs/errors-task-priority.md
  1418â†’# Total Errors: 5
  1419â†’# Critical: 1 | High: 2 | Medium: 1 | Low: 1
  1420â†’
  1421â†’# 3. Review error log
  1422â†’cat docs/errors-task-priority.md
  1423â†’
  1424â†’# 4. Fix all errors
  1425â†’/flow consolidate task-priority
  1426â†’
  1427â†’# Output:
  1428â†’# Fixing Error 1: TypeError in PrioritySelector
  1429â†’# Spawning quality-agent...
  1430â†’# â†’ Fixed
  1431â†’# Fixing Error 2: Network error in API
  1432â†’# Spawning development-agent...
  1433â†’# â†’ Fixed
  1434â†’# ...
  1435â†’
  1436â†’# 5. Re-test to verify
  1437â†’/flow test task-priority
  1438â†’
  1439â†’# Output: Testing Complete
  1440â†’# Total Errors: 0
  1441â†’# âœ… All features working correctly
  1442â†’```
  1443â†’
  1444â†’### Key Differences: `/flow start` vs `/flow consolidate`
  1445â†’
  1446â†’| Aspect | `/flow start` | `/flow consolidate` |
  1447â†’|--------|---------------|---------------------|
  1448â†’| Purpose | Implement new features | Fix specific errors |
  1449â†’| Input | PRD stories | Error log |
  1450â†’| Runs | Full mavenSteps for each story | Only affected steps |
  1451â†’| Scope | Entire story implementation | Specific error fixes |
  1452â†’| Commits | Full feature commits | Targeted bug fixes |
  1453â†’| Result | New features implemented | Errors resolved |
  1454â†’
  1455â†’---
  1456â†’
  1457â†’
  1458â†’---
  1459â†’
  1460â†’## Mobile Development
  1461â†’
  1462â†’Maven Flow includes comprehensive support for React Native + Expo mobile app development with shared Supabase backend.
  1463â†’
  1464â†’### Quick Start for Mobile
  1465â†’
  1466â†’**Step 1: Setup mobile environment**
  1467â†’```bash
  1468â†’/flow-mobile setup
  1469â†’```
  1470â†’This creates the complete mobile app structure in `mobile/` folder.
  1471â†’
  1472â†’**Step 2: Create mobile PRDs**
  1473â†’```bash
  1474â†’flow-prd-mobile [feature-name]
  1475â†’```
  1476â†’Converts existing web PRDs to mobile-specific PRDs with offline support.
  1477â†’
  1478â†’**Step 3: Sync with web app**
  1479â†’```bash
  1480â†’/flow-mobile sync
  1481â†’```
  1482â†’Syncs database types and configuration from web to mobile.
  1483â†’
  1484â†’**Step 4: Develop mobile features**
  1485â†’```bash
  1486â†’/flow start
  1487â†’```
  1488â†’Maven Flow detects mobile PRDs and uses mobile-app-agent for implementation.
  1489â†’
  1490â†’### Mobile App Structure
  1491â†’
  1492â†’```
  1493â†’mobile/
  1494â†’â”œâ”€â”€ app/                    # Expo Router screens (file-based routing)
  1495â†’â”‚   â”œâ”€â”€ (tabs)/            # Tab navigation screens
  1496â†’â”‚   â”œâ”€â”€ auth/              # Authentication screens
  1497â†’â”‚   â””â”€â”€ _layout.tsx        # Root layout
  1498â†’â”œâ”€â”€ components/            # Mobile-specific components
  1499â†’â”œâ”€â”€ lib/                   # Utilities (Supabase, Firebase, Storage)
  1500â†’â”œâ”€â”€ hooks/                 # Custom React hooks
  1501â†’â”œâ”€â”€ store/                 # Zustand state management
  1502â†’â”œâ”€â”€ constants/             # App constants
  1503â†’â”œâ”€â”€ types/                 # TypeScript types (shared with web)
  1504â†’â”œâ”€â”€ docs/                  # Mobile PRDs
  1505â†’â”‚   â”œâ”€â”€ prd-*.json        # Mobile PRDs
  1506â†’â”‚   â””â”€â”€ progress-*.txt    # Mobile progress files
  1507â†’â””â”€â”€ package.json
  1508â†’```
  1509â†’
  1510â†’### Tech Stack
  1511â†’
  1512â†’| Layer | Technology |
  1513â†’|-------|------------|
  1514â†’| **Framework** | React Native + Expo SDK 51 |
  1515â†’| **Navigation** | Expo Router (file-based routing) |
  1516â†’| **Styling** | NativeWind (Tailwind for React Native) |
  1517â†’| **State** | TanStack Query + Zustand |
  1518â†’| **Auth** | Firebase Authentication |
  1519â†’| **Backend** | Supabase (shared with web app) |
  1520â†’| **Push** | Firebase Cloud Messaging |
  1521â†’| **Offline** | AsyncStorage with auto-sync |
  1522â†’
  1523â†’### Mobile-Specific Features
  1524â†’
  1525â†’#### Offline-First Architecture
  1526â†’All mobile features work offline with automatic sync:
  1527â†’
  1528â†’**Read Pattern:**
  1529â†’1. Check AsyncStorage cache first
  1530â†’2. If fresh (< 5 min), use cached data
  1531â†’3. If missing/stale, fetch from Supabase
  1532â†’4. Update cache and display
  1533â†’
  1534â†’**Write Pattern:**
  1535â†’1. Optimistically update UI immediately
  1536â†’2. If online: Execute immediately
  1537â†’3. If offline: Queue in AsyncStorage
  1538â†’4. When back online: Process queue automatically
  1539â†’
  1540â†’#### Native UI Patterns
  1541â†’Use mobile-specific interactions:
  1542â†’- **Pull-to-refresh** for data reload
  1543â†’- **Swipe actions** for quick actions (delete, complete)
  1544â†’- **Bottom sheets** for options/modals
  1545â†’- **Tab bar** for main navigation
  1546â†’- **Stack navigation** for drilling down
  1547â†’- **Long-press** for context menus
  1548â†’
  1549â†’#### Touch Targets
  1550â†’- **Minimum 44x44 points** for all touch targets (Apple)
  1551â†’- **48x48 dp minimum** for Android
  1552â†’- Adequate spacing between targets
  1553â†’
  1554â†’#### Push Notifications
  1555â†’- Firebase Cloud Messaging for push notifications
  1556â†’- Task assignments, due reminders, status changes
  1557â†’- Background message handling
  1558â†’- Notification channels (Android)
  1559â†’
  1560â†’### Commands
  1561â†’
  1562â†’#### `/flow-mobile setup`
  1563â†’Creates complete React Native + Expo mobile app:
  1564â†’- Installs all dependencies
  1565â†’- Configures Expo Router
  1566â†’- Sets up NativeWind styling
  1567â†’- Configures Supabase client (shared with web)
  1568â†’- Configures Firebase Auth + FCM
  1569â†’- Implements offline storage + sync logic
  1570â†’- Creates base screens and navigation
  1571â†’
  1572â†’#### `/flow-mobile status`
  1573â†’Shows mobile app status:
  1574â†’- Mobile folder existence
  1575â†’- Expo configuration
  1576â†’- Dependencies status
  1577â†’- Supabase connection
  1578â†’- Firebase configuration
  1579â†’- Mobile PRDs and progress
  1580â†’- Offline sync status
  1581â†’
  1582â†’#### `/flow-mobile sync`
  1583â†’Synchronizes web and mobile:
  1584â†’- Database types (from Supabase schema)
  1585â†’- Environment variables
  1586â†’- API endpoints
  1587â†’- Auth configuration
  1588â†’
  1589â†’#### `flow-prd-mobile [feature-name]`
  1590â†’Converts web PRD to mobile PRD:
  1591â†’- Adds offline requirements
  1592â†’- Adds native UI patterns
  1593â†’- Adds touch interactions
  1594â†’- Adds push notification specs
  1595â†’- Creates `mobile/docs/prd-[feature-name].json`
  1596â†’
  1597â†’### Development Workflow
  1598â†’
  1599â†’**For Web Development:**
  1600â†’```bash
  1601â†’# 1. Create web PRD
  1602â†’flow-prd
  1603â†’# 2. Convert to JSON
  1604â†’flow-convert
  1605â†’# 3. Start development
  1606â†’/flow start
  1607â†’```
  1608â†’
  1609â†’**For Mobile Development:**
  1610â†’```bash
  1611â†’# 1. Setup mobile (one-time)
  1612â†’/flow-mobile setup
  1613â†’
  1614â†’# 2. Create mobile PRDs from web PRDs
  1615â†’flow-prd-mobile task-management
  1616â†’flow-prd-mobile user-auth
  1617â†’
  1618â†’# 3. Sync types and config
  1619â†’/flow-mobile sync
  1620â†’
  1621â†’# 4. Start mobile development
  1622â†’/flow start
  1623â†’```
  1624â†’
  1625â†’### Testing Mobile Apps
  1626â†’
  1627â†’**Test with Expo Go (quickest):**
  1628â†’```bash
  1629â†’cd mobile
  1630â†’pnpm start
  1631â†’# Scan QR code with Expo Go app on phone
  1632â†’```
  1633â†’
  1634â†’**Test on iOS simulator:**
  1635â†’```bash
  1636â†’cd mobile
  1637â†’pnpm ios
  1638â†’```
  1639â†’
  1640â†’**Test on Android emulator:**
  1641â†’```bash
  1642â†’cd mobile
  1643â†’pnpm android
  1644â†’```
  1645â†’
  1646â†’**Test offline functionality:**
  1647â†’1. Load app and data
  1648â†’2. Enable Airplane mode
  1649â†’3. Navigate around (data should load from cache)
  1650â†’4. Create/update/delete items
  1651â†’5. Disable Airplane mode
  1652â†’6. Verify sync happens automatically
  1653â†’
  1654â†’### Building and Deploying
  1655â†’
  1656â†’**Build with EAS Build:**
  1657â†’```bash
  1658â†’cd mobile
  1659â†’eas build --platform ios
  1660â†’eas build --platform android
  1661â†’```
  1662â†’
  1663â†’**Submit to stores:**
  1664â†’```bash
  1665â†’eas submit --platform ios
  1666â†’eas submit --platform android
  1667â†’```
  1668â†’
  1669â†’**Over-the-air updates:**
  1670â†’```bash
  1671â†’eas update --branch production
  1672â†’```
  1673â†’
  1674â†’### Shared Backend
  1675â†’
  1676â†’Mobile app shares the same Supabase backend as web:
  1677â†’- Same database schema
  1678â†’- Same RLS policies
  1679â†’- Same API endpoints
  1680â†’- Same types (generated from schema)
  1681â†’
  1682â†’**Sync types:**
  1683â†’```bash
  1684â†’/flow-mobile sync
  1685â†’```
  1686â†’
  1687â†’This generates `mobile/types/database.types.ts` from Supabase schema.
  1688â†’
  1689â†’### Mobile PRD Structure
  1690â†’
  1691â†’Mobile PRDs include additional fields:
  1692â†’
  1693â†’**Offline Requirements:**
  1694â†’```json
  1695â†’"offline": {
  1696â†’  "required": true,
  1697â†’  "cacheKey": "tasks-cache",
  1698â†’  "cacheTTL": 300000,
  1699â†’  "syncStrategy": "auto-on-online"
  1700â†’}
  1701â†’```
  1702â†’
  1703â†’**Native UI Patterns:**
  1704â†’```json
  1705â†’"uiPatterns": {
  1706â†’  "navigation": "tab-bar",
  1707â†’  "actions": {
  1708â†’    "complete": "swipe-left",
  1709â†’    "delete": "swipe-right",
  1710â†’    "edit": "tap-card"
  1711â†’  },
  1712â†’  "refresh": "pull-to-refresh"
  1713â†’}
  1714â†’```
  1715â†’
  1716â†’**Push Notifications:**
  1717â†’```json
  1718â†’"notifications": {
  1719â†’  "enabled": true,
  1720â†’  "events": [
  1721â†’    {
  1722â†’      "event": "task_assigned",
  1723â†’      "title": "New Task Assigned",
  1724â†’      "body": "You've been assigned: {task_title}",
  1725â†’      "tapAction": "navigate_to_task_details"
  1726â†’    }
  1727â†’  ]
  1728â†’}
  1729â†’```
  1730â†’
  1731â†’### Agent Assignments for Mobile
  1732â†’
  1733â†’| Maven Step | Agent | Purpose for Mobile |
  1734â†’|------------|-------|-------------------|
  1735â†’| 1 | mobile-app-agent | Create mobile screens with Expo Router |
  1736â†’| 2 | mobile-app-agent | Mobile dependencies setup |
  1737â†’| 3 | mobile-app-agent | Mobile folder structure |
  1738â†’| 5 | quality-agent | Type safety (same as web) |
  1739â†’| 6 | mobile-app-agent | Centralize mobile components |
  1740â†’| 7 | mobile-app-agent | Supabase integration (shared) |
  1741â†’| 8 | mobile-app-agent | Firebase Auth + push notifications |
  1742â†’| 9 | mobile-app-agent | Mobile MCP integrations |
  1743â†’| 10 | mobile-app-agent | Mobile security + error handling |
  1744â†’| 11 | design-agent | Professional mobile UI/UX |
  1745â†’
  1746â†’### Key Differences: Web vs Mobile
  1747â†’
  1748â†’| Aspect | Web | Mobile |
  1749â†’|--------|-----|--------|
  1750â†’| **Framework** | Next.js | React Native + Expo |
  1751â†’| **Routing** | Next.js App Router | Expo Router |
  1752â†’| **Styling** | Tailwind CSS | NativeWind (Tailwind) |
  1753â†’| **State** | TanStack Query | TanStack Query + AsyncStorage |
  1754â†’| **Navigation** | Links/buttons | Tabs/stacks/gestures |
  1755â†’| **Offline** | Rarely required | **Always required** |
  1756â†’| **Updates** | Realtime | Queue + sync |
  1757â†’| **Notifications** | In-app only | Push (FCM) |
  1758â†’| **Input** | Keyboard + mouse | Touch + keyboard |
  1759â†’| **Touch Targets** | N/A | 44x44pt minimum |
  1760â†’
  1761â†’### Server Management for Mobile
  1762â†’
  1763â†’**Expo server runs on port 8081.**
  1764â†’
  1765â†’**âŒ FORBIDDEN:**
  1766â†’```bash
  1767â†’pkill -9 node
  1768â†’killall node
  1769â†’```
  1770â†’
  1771â†’**âœ… CORRECT:**
  1772â†’```bash
  1773â†’# Find Expo server
  1774â†’lsof -ti:8081
  1775â†’# Kill ONLY that process
  1776â†’kill -9 $(lsof -ti:8081)
  1777â†’```
  1778â†’
  1779â†’## Common Workflows
  1780â†’
  1781â†’### Workflow 1: New Feature with Database
  1782â†’
  1783â†’**Story requires:** Database schema + Backend API + UI
  1784â†’
  1785â†’**Recommended mavenSteps:** `[1, 3, 5, 7, 10]`
  1786â†’
  1787â†’**What happens:**
  1788â†’1. **Step 1 (dev):** Create table with Supabase MCP, generate types
  1789â†’2. **Step 3 (refactor):** Structure to feature-based folders
  1790â†’3. **Step 5 (quality):** Remove 'any' types, add @ aliases
  1791â†’4. **Step 7 (dev):** Create API endpoints, connect to database
  1792â†’5. **Step 10 (security):** Add RLS policies, error handling
  1793â†’
  1794â†’**Total time:** ~1-2 hours
  1795â†’
  1796â†’### Workflow 2: UI Component Only
  1797â†’
  1798â†’**Story requires:** Add new UI component to existing page
  1799â†’
  1800â†’**Recommended mavenSteps:** `[3, 5, 6]`
  1801â†’
  1802â†’**What happens:**
  1803â†’1. **Step 3 (refactor):** Create in feature-based structure
  1804â†’2. **Step 5 (quality):** Type safety, no 'any' types
  1805â†’3. **Step 6 (refactor):** Move reusable parts to @shared/ui
  1806â†’
  1807â†’**Total time:** ~30-45 minutes
  1808â†’
  1809â†’### Workflow 3: Authentication Flow
  1810â†’
  1811â†’**Story requires:** User signup, login, session management
  1812â†’
  1813â†’**Recommended mavenSteps:** `[1, 7, 8, 10]`
  1814â†’
  1815â†’**What happens:**
  1816â†’1. **Step 1 (dev):** Create auth UI pages
  1817â†’2. **Step 7 (dev):** Set up Supabase Auth, Firebase integration
  1818â†’3. **Step 8 (security):** Implement auth flow, RLS policies
  1819â†’4. **Step 10 (security):** Security hardening, error handling
  1820â†’
  1821â†’**Total time:** ~1.5 hours
  1822â†’
  1823â†’### Workflow 4: Mobile App (Expo/React Native)
  1824â†’
  1825â†’**Story requires:** Mobile screen with professional design
  1826â†’
  1827â†’**Recommended mavenSteps:** `[1, 3, 5, 6, 11]`
  1828â†’
  1829â†’**What happens:**
  1830â†’1. **Step 1 (dev):** Create base screen
  1831â†’2. **Step 3 (refactor):** Structure properly
  1832â†’3. **Step 5 (quality):** Type safety
  1833â†’4. **Step 6 (refactor):** Centralize UI components
  1834â†’5. **Step 11 (design):** Apply professional mobile design
  1835â†’
  1836â†’**Total time:** ~1.5-2 hours
  1837â†’
  1838â†’---
  1839â†’
  1840â†’## Troubleshooting
  1841â†’
  1842â†’### Prerequisites Issues
  1843â†’
  1844â†’**Error: `No docs/ directory found`**
  1845â†’```bash
  1846â†’# Fix: Create the directory
  1847â†’mkdir docs
  1848â†’```
  1849â†’
  1850â†’**Error: `No PRD files found in docs/`**
  1851â†’```bash
  1852â†’# Fix: Create a PRD using flow-prd skill
  1853â†’Tell me you want to create a PRD for [feature]
  1854â†’```
  1855â†’
  1856â†’**Message: `All PRDs complete! No work to do.`**
  1857â†’- All stories in all PRDs have `passes: true`
  1858â†’- Create a new PRD or add more stories to existing PRD
  1859â†’
  1860â†’### Flow Execution Issues
  1861â†’
  1862â†’**Flow stops mid-story:**
  1863â†’
  1864â†’1. **Check progress file:**
  1865â†’   ```bash
  1866â†’   cat docs/progress-[feature-name].txt
  1867â†’   ```
  1868â†’
  1869â†’2. **Review recent commits:**
  1870â†’   ```bash
  1871â†’   git log --oneline -10
  1872â†’   ```
  1873â†’
  1874â†’3. **Fix the issue** (code error, typecheck fail, etc.)
  1875â†’
  1876â†’4. **Resume flow:**
  1877â†’   ```bash
  1878â†’   /flow continue
  1879â†’   ```
  1880â†’
  1881â†’**Typecheck failing:**
  1882â†’- Run `pnpm typecheck` to see specific errors
  1883â†’- Fix 'any' types, missing imports, type mismatches
  1884â†’- Run `/flow continue` when fixed
  1885â†’
  1886â†’**Quality agent blocking commit:**
  1887â†’- Check for 'any' types, gradients, emojis
  1888â†’- Fix all BLOCKING issues
  1889â†’- Run `/flow continue`
  1890â†’
  1891â†’### MCP Tool Issues
  1892â†’
  1893â†’**Agent not using MCP tools:**
  1894â†’
  1895â†’1. **Verify MCP is configured:**
  1896â†’   - Check Claude Code MCP settings
  1897â†’   - Ensure MCP server is running
  1898â†’
  1899â†’2. **Check PRD mcpTools:**
  1900â†’   ```json
  1901â†’   "mcpTools": {
  1902â†’     "step1": ["supabase"]
  1903â†’   }
  1904â†’   ```
  1905â†’
  1906â†’3. **Agent should see instruction:**
  1907â†’   ```
  1908â†’   Use these MCPs: supabase
  1909â†’   ```
  1910â†’
  1911â†’4. **If still not working:**
  1912â†’   - Check agent has `tools` field in frontmatter (should NOT have it)
  1913â†’   - Restart Claude Code
  1914â†’   - Try `/flow continue`
  1915â†’
  1916â†’### Architecture Issues
  1917â†’
  1918â†’**Import path errors:**
  1919â†’- Ensure `tsconfig.json` has correct `paths` configuration
  1920â†’- Use `@/` aliases, not relative imports
  1921â†’- quality-agent will auto-fix most import issues
  1922â†’
  1923â†’**Component too large (>300 lines):**
  1924â†’- refactor-agent will split it
  1925â†’- Or manually split before running flow
  1926â†’- Mark story as complete if acceptable
  1927â†’
  1928â†’### Browser Testing Issues
  1929â†’
  1930â†’**Console has errors:**
  1931â†’- Fix all JavaScript errors before marking complete
  1932â†’- Check for missing imports, undefined variables
  1933â†’- Verify API endpoints exist
  1934â†’
  1935â†’**Test user cannot log in:**
  1936â†’- Create user: `revccnt@gmail.com` / `Elishiba!90`
  1937â†’- Verify signup flow works
  1938â†’- Check database for user record
  1939â†’
  1940â†’### Getting Help
  1941â†’
  1942â†’**Still stuck?**
  1943â†’1. Run `/flow status` for detailed diagnostics
  1944â†’2. Check progress file: `docs/progress-[feature-name].txt`
  1945â†’3. Review git history: `git log --oneline -20`
  1946â†’4. Check agent documentation in `.claude/agents/`
  1947â†’
  1948â†’---
  1949â†’
  1950â†’**Flow not starting?**
  1951â†’- Check that at least one `docs/prd-*.json` file exists
  1952â†’- Verify JSON is valid
  1953â†’- Run `/flow status` for detailed diagnostics
  1954â†’
  1955â†’**Iteration failing?**
  1956â†’- Check that PRD's `docs/progress-[feature-name].txt` for errors
  1957â†’- Review git log: `git log --oneline -10`
  1958â†’- Resume with `/flow continue` after fixing issues
  1959â†’
  1960â†’**Wrong PRD being processed?**
  1961â†’- Use `/flow status` to see all PRDs and their status
  1962â†’- Use `/flow continue [prd-name]` to specify which PRD to work on
  1963â†’
  1964â†’**Need to restart a PRD?**
  1965â†’- Use `/flow reset [prd-name]` to archive and begin fresh for that PRD
  1966â†’- Other PRDs remain unaffected
  1967â†’
  1968â†’**Quality hooks not running?**
  1969â†’- Ensure `maven-flow/.claude/settings.json` is configured
  1970â†’- Check that hook scripts are executable: `chmod +x maven-flow/hooks/*.sh`
  1971â†’
  1972â†’---
  1973â†’
  1974â†’## Memory System Architecture
  1975â†’
  1976â†’### Story-Level Memory Files
  1977â†’
  1978â†’Each story gets a permanent memory file: `docs/[feature]/story-US-[###]-[title].txt`
  1979â†’
  1980â†’**Folder Structure:**
  1981â†’```
  1982â†’docs/
  1983â†’â”œâ”€â”€ authentication/              # Story memories folder (auto-created)
  1984â†’â”‚   â”œâ”€â”€ story-US-001-login.txt
  1985â†’â”‚   â”œâ”€â”€ story-US-002-signup.txt
  1986â†’â”‚   â””â”€â”€ story-US-003-reset-password.txt
  1987â†’â”œâ”€â”€ prd-authentication.md       # Human-readable PRD
  1988â†’â”œâ”€â”€ prd-authentication.json     # Machine-readable PRD
  1989â†’â””â”€â”€ consolidated-authentication.txt  # Consolidated memory (after all stories)
  1990â†’```
  1991â†’
  1992â†’**Memory File Format:**
  1993â†’```markdown
  1994â†’---
  1995â†’memoryVersion: 1
  1996â†’schemaVersion: 1
  1997â†’storyId: US-001
  1998â†’storyTitle: User Login
  1999â†’feature: Authentication System
  2000â†’completedDate: 2025-01-18
  2001â†’agents: development-agent, security-agent
  2002â†’---
  2003â†’
  2004â†’# Story US-001: User Login
  2005â†’
  2006â†’## Implemented
  2007â†’- Created users table with id, email, password_hash columns
  2008â†’- Built login UI with email/password fields and validation
  2009â†’- Implemented authenticate() server action
  2010â†’- Added session management with cookies
  2011â†’
  2012â†’## Database Decisions
  2013â†’- Users table in Supabase with RLS policies
  2014â†’- Password hashing using bcrypt (cost factor 10)
  2015â†’- Session tokens stored in supabase_auth.sessions
  2016â†’
  2017â†’## UI/UX Patterns
  2018â†’- Login form uses centralized Form component
  2019â†’- Error messages display inline below fields
  2020â†’- Success redirects to /dashboard
  2021â†’
  2022â†’## Integration Points
  2023â†’- Authentication state managed via React Context (AuthContext)
  2024â†’- Server actions in src/actions/auth.ts
  2025â†’- Session validation middleware for protected routes
  2026â†’
  2027â†’## Lessons Learned
  2028â†’- Always use Supabase MCP for database operations
  2029â†’- Test authentication flow with real credentials
  2030â†’- RLS policies must be applied before testing
  2031â†’
  2032â†’## Best Practices Identified
  2033â†’- Server actions return { success, error, data } pattern
  2034â†’- All auth-related UI components use AuthContext
  2035â†’
  2036â†’## Commit
  2037â†’feat: add user login with email/password authentication
  2038â†’```
  2039â†’
  2040â†’### Consolidated Memory (PRD-Level)
  2041â†’
  2042â†’After ALL stories in a PRD complete, consolidates into `docs/consolidated-[feature].txt` (~15K tokens max)
  2043â†’
  2044â†’**Consolidation Rules (HARD CAP):**
  2045â†’- Summarize AGGRESSIVELY - focus on patterns, decisions, interfaces
  2046â†’- AVOID repeating step-by-step details already in story files
  2047â†’- Target ~15K tokens maximum
  2048â†’- Story files remain the detailed source; consolidation is for cross-PRD context
  2049â†’
  2050â†’**Consolidation Format:**
  2051â†’```markdown
  2052â†’---
  2053â†’memoryVersion: 1
  2054â†’schemaVersion: 1
  2055â†’feature: Authentication System
  2056â†’consolidatedDate: 2025-01-18
  2057â†’totalStories: 5
  2058â†’---
  2059â†’
  2060â†’# Authentication System - Consolidated Implementation Memory
  2061â†’
  2062â†’## System Overview
  2063â†’Complete user authentication supporting login, signup, password reset, and session management.
  2064â†’
  2065â†’## Key Architectural Decisions
  2066â†’
  2067â†’### Database
  2068â†’- **Supabase as single source of truth** - Always use MCP for queries
  2069â†’- **users table**: id, email, password_hash, created_at, updated_at
  2070â†’- **RLS**: Authenticated users read/write own data only
  2071â†’
  2072â†’### Authentication Flow
  2073â†’1. Email/password â†’ authenticate() action
  2074â†’2. Session token â†’ HTTP-only cookie
  2075â†’3. Protected routes â†’ middleware validation
  2076â†’4. Logout â†’ clear cookie + Supabase session
  2077â†’
  2078â†’## Public Interfaces
  2079â†’
  2080â†’### Server Actions (`src/actions/auth.ts`)
  2081â†’```typescript
  2082â†’authenticate(email, password) â†’ { success, error, data }
  2083â†’register(email, password) â†’ { success, error, data }
  2084â†’requestPasswordReset(email) â†’ { success, error }
  2085â†’resetPassword(token, newPassword) â†’ { success, error }
  2086â†’logout() â†’ { success }
  2087â†’```
  2088â†’
  2089â†’## Integration Patterns
  2090â†’
  2091â†’### For New Features Requiring Auth
  2092â†’1. Wrap with `AuthContext` provider
  2093â†’2. Check `user` state before allowing access
  2094â†’3. Use `authenticate()` for credential validation
  2095â†’4. Apply RLS policies to new tables with `user_id` FK
  2096â†’
  2097â†’## Related PRDs
  2098â†’- **Dashboard PRD**: Requires auth, loads this memory
  2099â†’
  2100â†’## Consolidated From Stories
  2101â†’US-001: User login | US-002: User signup | US-003: Password reset | US-004: Session management | US-005: Logout
  2102â†’```
  2103â†’
  2104â†’### Cross-PRD Memory Loading
  2105â†’
  2106â†’When implementing a PRD that depends on other PRDs:
  2107â†’
  2108â†’1. **Load related consolidated memory** from `relatedPRDs` array
  2109â†’2. **Pre-analyze and summarize** to create focused summary (~3-5K tokens)
  2110â†’3. **Inject into story context** only relevant parts
  2111â†’
  2112â†’**Example: Dashboard PRD depends on Authentication PRD**
  2113â†’```json
  2114â†’{
  2115â†’  "project": "User Dashboard",
  2116â†’  "consolidatedMemory": "docs/consolidated-dashboard.txt",
  2117â†’  "relatedPRDs": ["docs/prd-authentication.json"]
  2118â†’}
  2119â†’```
  2120â†’
  2121â†’**Context budget per story:** ~35K tokens
  2122â†’- Main prompt: ~5K
  2123â†’- Previous stories in same PRD: ~10K
  2124â†’- Related PRD summaries: ~15K
  2125â†’- Agent definitions: referenced, not embedded
  2126â†’- Buffer: ~5K
  2127â†’
  2128â†’---
  2129â†’
  2130â†’## Signal Format
  2131â†’
  2132â†’### Story Complete Signal
  2133â†’
  2134â†’After each story completes, output this signal:
  2135â†’
  2136â†’```xml
  2137â†’<STORY_COMPLETE>
  2138â†’<story_id>US-001</story_id>
  2139â†’<story_title>User login</story_title>
  2140â†’<feature>Authentication System</feature>
  2141â†’<agents_used>development-agent, security-agent</agents_used>
  2142â†’<commit>feat: add user login with email/password authentication</commit>
  2143â†’<memory_file>docs/authentication/story-US-001-login.txt</memory_file>
  2144â†’</STORY_COMPLETE>
  2145â†’```
  2146â†’
  2147â†’**Signal triggers:**
  2148â†’1. Create/update `docs/[feature]/story-US-[###]-[title].txt`
  2149â†’2. Update PRD JSON: `passes: true`
  2150â†’3. Commit changes with proper format
  2151â†’4. Output signal to indicate completion
  2152â†’
  2153â†’### All Complete Signal
  2154â†’
  2155â†’After ALL stories in a PRD complete, output this signal:
  2156â†’
  2157â†’```xml
  2158â†’<ALL_COMPLETE>
  2159â†’<feature>Authentication System</feature>
  2160â†’<total_stories>5</total_stories>
  2161â†’<completed_stories>5</completed_stories>
  2162â†’<consolidated_memory>docs/consolidated-authentication.txt</consolidated_memory>
  2163â†’</ALL_COMPLETE>
  2164â†’```
  2165â†’
  2166â†’**Signal triggers:**
  2167â†’1. Spawn consolidation agent
  2168â†’2. Consolidate all story memories into `docs/consolidated-[feature].txt`
  2169â†’3. Hard cap at ~15K tokens (aggressive summarization)
  2170â†’4. Output signal with consolidation path
  2171â†’
  2172â†’---
  2173â†’
  2174â†’## Enhanced Story Processing Flow
  2175â†’
  2176â†’### With Memory System and Signals
  2177â†’
  2178â†’When processing each story:
  2179â†’
  2180â†’```markdown
  2181â†’## Story: US-001 - User Login
  2182â†’
  2183â†’**From PRD:**
  2184â†’- Feature: Authentication System
  2185â†’- mavenSteps: [1, 7, 10]
  2186â†’- mcpTools: { step1: ["supabase"], step7: ["supabase"], step10: [] }
  2187â†’- relatedPRDs: []
  2188â†’
  2189â†’**Loading Context:**
  2190â†’- Previous stories in this PRD: 0
  2191â†’- Related PRD memories: 0
  2192â†’
  2193â†’**Processing:**
  2194â†’
  2195â†’1. [Step 1 - Foundation]
  2196â†’   Spawning development agent...
  2197â†’   â†’ [Agent completed successfully]
  2198â†’
  2199â†’2. [Step 7 - Data Layer]
  2200â†’   Spawning development agent...
  2201â†’   â†’ [Agent completed successfully]
  2202â†’
  2203â†’3. [Step 10 - Security & Error Handling]
  2204â†’   Spawning security agent...
  2205â†’   â†’ [Agent completed successfully]
  2206â†’
  2207â†’4. Running quality checks...
  2208â†’   pnpm run typecheck
  2209â†’   â†’ Passed
  2210â†’
  2211â†’5. Committing changes...
  2212â†’   git commit -m "feat: add user login with email/password authentication"
  2213â†’   â†’ Committed
  2214â†’
  2215â†’6. Creating story memory...
  2216â†’   Writing docs/authentication/story-US-001-login.txt
  2217â†’   â†’ Created
  2218â†’
  2219â†’7. Updating PRD...
  2220â†’   Setting passes: true for US-001
  2221â†’   â†’ Updated
  2222â†’
  2223â†’<STORY_COMPLETE>
  2224â†’<story_id>US-001</story_id>
  2225â†’<story_title>User login</story_title>
  2226â†’<feature>Authentication System</feature>
  2227â†’<agents_used>development-agent, development-agent, security-agent</agents_used>
  2228â†’<commit>feat: add user login with email/password authentication</commit>
  2229â†’<memory_file>docs/authentication/story-US-001-login.txt</memory_file>
  2230â†’</STORY_COMPLETE>
  2231â†’
  2232â†’âœ… Story US-001 complete
  2233â†’```
  2234â†’
  2235â†’### Consolidation Flow (When All Stories Complete)
  2236â†’
  2237â†’```markdown
  2238â†’## All Stories Complete - Consolidating
  2239â†’
  2240â†’**Feature:** Authentication System
  2241â†’**Total Stories:** 5
  2242â†’**Completed Stories:** 5
  2243â†’
  2244â†’1. Spawning consolidation agent...
  2245â†’   â†’ Reading all story memory files
  2246â†’   â†’ Summarizing patterns, decisions, interfaces
  2247â†’   â†’ Target: ~15K tokens (hard cap)
  2248â†’   â†’ [Agent completed successfully]
  2249â†’
  2250â†’2. Creating consolidated memory...
  2251â†’   Writing docs/consolidated-authentication.txt
  2252â†’   â†’ Created (14,234 tokens)
  2253â†’
  2254â†’<ALL_COMPLETE>
  2255â†’<feature>Authentication System</feature>
  2256â†’<total_stories>5</total_stories>
  2257â†’<completed_stories>5</completed_stories>
  2258â†’<consolidated_memory>docs/consolidated-authentication.txt</consolidated_memory>
  2259â†’</ALL_COMPLETE>
  2260â†’
  2261â†’âœ… All stories complete for Authentication System
  2262â†’```
  2263â†’
  2264â†’---
  2265â†’
  2266â†’## Folder Creation and Memory Management
  2267â†’
  2268â†’### Automatic Folder Creation
  2269â†’
  2270â†’The flow automatically creates the `docs/[feature]/` folder when processing the first story of a PRD:
  2271â†’
  2272â†’```bash
  2273â†’# First story of authentication PRD
  2274â†’docs/authentication/                    # Auto-created
  2275â†’â”œâ”€â”€ story-US-001-login.txt            # Created after US-001 complete
  2276â†’â”œâ”€â”€ story-US-002-signup.txt           # Created after US-002 complete
  2277â†’â””â”€â”€ story-US-003-reset-password.txt   # Created after US-003 complete
  2278â†’```
  2279â†’
  2280â†’### Memory File Updates
  2281â†’
  2282â†’When a story is re-run (e.g., after consolidation):
  2283â†’1. Read existing memory file
  2284â†’2. Append new learnings
  2285â†’3. Update `memoryVersion` if format changes
  2286â†’4. Keep full history of iterations
  2287â†’
  2288â†’### Memory Versioning
  2289â†’
  2290â†’Each memory file includes version info for future compatibility:
  2291â†’
  2292â†’```yaml
  2293â†’---
  2294â†’memoryVersion: 1
  2295â†’schemaVersion: 1
  2296â†’---
  2297â†’```
  2298â†’
  2299â†’**Benefits:**
  2300â†’- System evolution: Old memories won't be misinterpreted
  2301â†’- Backward compatibility: Agents can adapt behavior based on version
  2302â†’- Migration support: Clear path for upgrading memory formats
  2303â†’- Debugging: Version mismatches immediately visible
  2304â†’
  2305â†’---
  2306â†’
  2307â†’## Terminal Command Integration
  2308â†’
  2309â†’The terminal forwarder scripts (`bin/flow.sh`, `bin/flow-prd.sh`, `bin/flow-convert.sh`) invoke these Claude Code commands directly.
  2310â†’
  2311â†’**Terminal â†’ Claude Code mapping:**
  2312â†’```bash
  2313â†’flow start           â†’ /flow start
  2314â†’flow status          â†’ /flow status
  2315â†’flow-prd create ...  â†’ /flow-prd create ...
  2316â†’flow-convert auth    â†’ /flow-convert auth
  2317â†’```
  2318â†’
  2319â†’The terminal scripts are minimal - they just forward user input to Claude Code which handles all the actual work.
  2320â†’
  2321â†’---
  2322â†’
  2323â†’*Maven Flow: Autonomous AI development with comprehensive quality assurance, multi-PRD support, and intelligent memory management powered by Claude Code CLI*
  2324â†’

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
