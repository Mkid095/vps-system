.claude/skills/workflow/SKILL.md:265:### Step 9: MCP Server Integrations
.claude/skills/workflow/SKILL.md:267:**Available MCPs**:
.claude/skills/workflow/SKILL.md:291:**Hooks**: `session-start.sh` validates MCP connections
.claude/skills/flow-prd-mobile.md:208:  "mcpTools": {
.claude/skills/flow-prd-mobile.md:377:      "mcpTools": {
.claude/skills/flow-convert/SKILL.md:18:**CRITICAL:** Each story MUST have its own `mcpTools` object specifying which MCPs to use for each Maven step.
.claude/skills/flow-convert/SKILL.md:22:## MCP Tool Assignment (Story-Level, Step-Based)
.claude/skills/flow-convert/SKILL.md:24:**CRITICAL ARCHITECTURE DECISION:** MCPs are assigned PER STORY PER STEP, not at the PRD level.
.claude/skills/flow-convert/SKILL.md:26:**SCAN FIRST - Discover Available MCPs:**
.claude/skills/flow-convert/SKILL.md:28:**BEFORE assigning any MCPs to stories, you MUST:**
.claude/skills/flow-convert/SKILL.md:30:1. **Check which MCP servers are available** in the current environment
.claude/skills/flow-convert/SKILL.md:31:2. **Only assign MCPs that actually exist** - don't guess or assume
.claude/skills/flow-convert/SKILL.md:32:3. **If unsure, leave mcpTools empty** `{}` rather than guessing wrong
.claude/skills/flow-convert/SKILL.md:34:**How to Discover Available MCPs:**
.claude/skills/flow-convert/SKILL.md:35:- Check the user's MCP configuration
.claude/skills/flow-convert/SKILL.md:36:- Ask the user what MCPs they have configured
.claude/skills/flow-convert/SKILL.md:37:- Look for common MCP patterns in the project (e.g., if using Supabase, check if supabase MCP is set up)
.claude/skills/flow-convert/SKILL.md:40:- Prevents assigning MCPs that don't exist
.claude/skills/flow-convert/SKILL.md:41:- Avoids confusion when agents can't find the MCP
.claude/skills/flow-convert/SKILL.md:44:**Why Story-Level MCP Assignment?**
.claude/skills/flow-convert/SKILL.md:46:1. **Context Isolation:** Each story has its own specific MCPs, reducing confusion as context grows
.claude/skills/flow-convert/SKILL.md:47:2. **Precision:** Flow command tells agents exactly which MCPs to use for each step
.claude/skills/flow-convert/SKILL.md:48:3. **No Hallucination:** Prevents agents from "forgetting" which MCPs are available in large contexts
.claude/skills/flow-convert/SKILL.md:49:4. **Granular Control:** Different stories and steps can use different MCPs
.claude/skills/flow-convert/SKILL.md:51:**How to Assign MCPs to Stories:**
.claude/skills/flow-convert/SKILL.md:56:2. **For each step**, specify which MCPs to use (ONLY from discovered/available MCPs)
.claude/skills/flow-convert/SKILL.md:57:3. **List MCPs in `mcpTools` object** with step-based keys (e.g., `step1`, `step7`)
.claude/skills/flow-convert/SKILL.md:59:**Important:** You only specify the MCP **name**, not individual tools. The agent will automatically discover and use the available tools from that MCP.
.claude/skills/flow-convert/SKILL.md:61:**Common MCPs (verify these are available before using):**
.claude/skills/flow-convert/SKILL.md:63:| MCP Name | Use For Steps |
.claude/skills/flow-convert/SKILL.md:73:**Example MCP Assignment:**
.claude/skills/flow-convert/SKILL.md:77:  "mcpTools": {
.claude/skills/flow-convert/SKILL.md:85:- For Step 1: Use supabase MCP
.claude/skills/flow-convert/SKILL.md:86:- For Step 7: Use supabase MCP and web-search-prime MCP
.claude/skills/flow-convert/SKILL.md:108:      "mcpTools": {
.claude/skills/flow-convert/SKILL.md:120:**Note:** The `mcpTools` object specifies MCPs for each step using step-based keys. Only list MCP names (e.g., "supabase"), not individual tools. Agents will automatically discover available tools from those MCPs.
.claude/skills/flow-convert/SKILL.md:126:**Why MCPs are at the STORY level (not PRD level):**
.claude/skills/flow-convert/SKILL.md:128:1. **Context Isolation:** Each story has its own specific MCPs, reducing confusion as context grows
.claude/skills/flow-convert/SKILL.md:129:2. **Precision:** Flow command tells agents exactly which MCPs to use for each step
.claude/skills/flow-convert/SKILL.md:130:3. **No Hallucination:** Prevents agents from "forgetting" which MCPs are available in large contexts
.claude/skills/flow-convert/SKILL.md:131:4. **Granular Control:** Different stories and steps can use different MCPs
.claude/skills/flow-convert/SKILL.md:137:2. For each step, reads the story's `mcpTools` for that step (e.g., `mcpTools.step1`)
.claude/skills/flow-convert/SKILL.md:138:3. Spawns the specialist agent and tells them: "Use these MCPs: supabase"
.claude/skills/flow-convert/SKILL.md:139:4. Agent checks if those MCPs are in their available tools
.claude/skills/flow-convert/SKILL.md:140:5. Agent uses those MCPs (or falls back to standard tools if unavailable)
.claude/skills/flow-convert/SKILL.md:142:**Example Story with MCP Tools:**
.claude/skills/flow-convert/SKILL.md:149:  "mcpTools": {
.claude/skills/flow-convert/SKILL.md:157:- Step 1 (development-agent): Told to use supabase MCP
.claude/skills/flow-convert/SKILL.md:158:- Step 7 (development-agent): Told to use supabase MCP, web-search-prime MCP
.claude/skills/flow-convert/SKILL.md:176:| 9 | development-agent | MCP Integration - MCP integrations (web-search, web-reader, chrome, expo, supabase) |
.claude/skills/flow-convert/SKILL.md:189:| MCP integration | [9] |
.claude/skills/flow-convert/SKILL.md:200:  "mcpTools": {
.claude/skills/flow-convert/SKILL.md:211:  "mcpTools": {}
.claude/skills/flow-convert/SKILL.md:219:  "mcpTools": {
.claude/skills/flow-convert/SKILL.md:307:8. **CRITICAL**: Add `mcpTools` object to each story - only list MCP names, not individual tools
.claude/skills/flow-convert/SKILL.md:362:      "mcpTools": {
.claude/skills/flow-convert/SKILL.md:381:      "mcpTools": {},
.claude/skills/flow-convert/SKILL.md:398:      "mcpTools": {
.claude/skills/flow-convert/SKILL.md:416:      "mcpTools": {},
.claude/skills/flow-convert/SKILL.md:445:**FIRST - Before assigning MCPs:**
.claude/skills/flow-convert/SKILL.md:446:- [ ] **Scanned for available MCP servers** in the environment
.claude/skills/flow-convert/SKILL.md:447:- [ ] **Verified which MCPs actually exist** before assigning them
.claude/skills/flow-convert/SKILL.md:448:- [ ] **Asked user if unsure** what MCPs are configured
.claude/skills/flow-convert/SKILL.md:457:- [ ] **Every story has mcpTools object (even if empty {})**
.claude/skills/flow-convert/SKILL.md:458:- [ ] **mcpTools uses step-based keys (step1, step7, etc.)**
.claude/skills/flow-convert/SKILL.md:459:- [ ] **mcpTools only lists ACTUALLY AVAILABLE MCP names** (not guessed)
.claude/skills/flow-convert/SKILL.md:460:- [ ] **mcpTools only lists MCP names (e.g., "supabase"), not individual tools**
.claude/agents/debugging-agent.md:36:   - Use **Z.AI Web Search MCP** for:
.claude/agents/debugging-agent.md:52:   - If the issue involves database operations, use **Supabase MCP** to:
.claude/agents/debugging-agent.md:88:   - Use Supabase MCP to verify database-related assumptions
.claude/agents/debugging-agent.md:141:### Z.AI Web Search MCP - Use for:
.claude/agents/debugging-agent.md:150:### Supabase MCP - Use for:
.claude/agents/debugging-agent.md:165:- Use Supabase MCP for all database-related verification
.claude/agents/debugging-agent.md:198:4. **Database Verification** (if applicable) - Supabase MCP findings
.claude/agents/testing.md:3:description: "Testing specialist for Maven workflow. Tests all implemented features using chrome-devtools MCP, logs errors, and validates application functionality. Use with /flow test command."
.claude/agents/testing.md:15:## Required MCPs
.claude/agents/testing.md:17:**You MUST have these MCPs available:**
.claude/agents/testing.md:20:**If chrome-devtools MCP is NOT available:**
.claude/agents/testing.md:21:- Report error to user: "chrome-devtools MCP is required for testing"
.claude/agents/testing.md:45:3. **Open browser** using chrome-devtools MCP
.claude/agents/testing.md:249:## Browser Automation with chrome-devtools MCP
.claude/agents/testing.md:251:**When testing with chrome-devtools MCP:**
.claude/agents/quality.md:16:- MCP Tools Reference: `.claude/shared/mcp-tools.md`
.claude/agents/quality.md:21:## MCP Tools Summary
.claude/agents/quality.md:23:**When told to use MCPs:**
.claude/agents/quality.md:25:You will be told which MCPs to use for each step (e.g., "Use these MCPs: web-search-prime").
.claude/agents/quality.md:27:1. **Check available tools** - Look for those MCPs in your available tool set
.claude/agents/quality.md:28:2. **Use the MCP** - If available, use it to complete the task
.claude/agents/quality.md:29:3. **Fallback** - If MCP tools aren't available, use standard tools (Read, Write, Bash, etc.)
.claude/agents/quality.md:31:**Common MCPs you might be told to use:**
.claude/agents/quality.md:38:Task: "Use these MCPs: web-search-prime"
.claude/agents/quality.md:41:‚úì Checks if web-search-prime MCP tools are available
.claude/agents/quality.md:46:**Note:** You only specify the MCP **name**, not individual tools. You will automatically discover and use the available tools from that MCP.
.claude/agents/quality.md:290:**CRITICAL for web applications using browser MCPs (playwright, chrome-devtools):**
.claude/agents/quality.md:307:2. Navigate using browser MCP
.claude/agents/quality.md:388:**Remember:** You are the **strict gatekeeper**. ZERO tolerance for 'any' types and gradients. Catch violations early, block commits until fixed, use MCP tools appropriately, and research when uncertain.
.claude/agents/mobile-app.md:26:## Required MCPs
.claude/agents/mobile-app.md:28:**You MUST have these MCPs available:**
.claude/agents/Project-Auditor.md:208:- Data from **Supabase** (verified via MCP)
.claude/agents/Project-Auditor.md:233:### 5. üóÑÔ∏è Database Connectivity Audit (Supabase MCP)
.claude/agents/Project-Auditor.md:235:**Objective:** Use Supabase MCP to validate real database integration.
.claude/agents/Project-Auditor.md:241:   # Use Supabase MCP to check connection
.claude/agents/Project-Auditor.md:639:### 12. üåç Web Search Research (z.ai MCP)
.claude/agents/Project-Auditor.md:787:4. **Use MCPs:**
.claude/agents/Project-Auditor.md:788:   - Supabase MCP for database checks
.claude/agents/Project-Auditor.md:789:   - z.ai MCP for research
.claude/agents/refactor.md:16:- MCP Tools Reference: `.claude/shared/mcp-tools.md`
.claude/agents/refactor.md:21:## MCP Tools Summary
.claude/agents/refactor.md:23:**When told to use MCPs:**
.claude/agents/refactor.md:25:You will be told which MCPs to use for each step (e.g., "Use these MCPs: web-search-prime").
.claude/agents/refactor.md:27:1. **Check available tools** - Look for those MCPs in your available tool set
.claude/agents/refactor.md:28:2. **Use the MCP** - If available, use it to complete the task
.claude/agents/refactor.md:29:3. **Fallback** - If MCP tools aren't available, use standard tools (Read, Write, Bash, etc.)
.claude/agents/refactor.md:31:**Common MCPs you might be told to use:**
.claude/agents/refactor.md:38:Task: "Use these MCPs: web-search-prime"
.claude/agents/refactor.md:41:‚úì Checks if web-search-prime MCP tools are available
.claude/agents/refactor.md:46:**Note:** You only specify the MCP **name**, not individual tools. You will automatically discover and use the available tools from that MCP.
.claude/agents/security.md:16:- MCP Tools Reference: `.claude/shared/mcp-tools.md`
.claude/agents/security.md:21:## MCP Tools Summary
.claude/agents/security.md:23:**When told to use MCPs:**
.claude/agents/security.md:25:You will be told which MCPs to use for each step (e.g., "Use these MCPs: supabase, web-search-prime").
.claude/agents/security.md:27:1. **Check available tools** - Look for those MCPs in your available tool set
.claude/agents/security.md:28:2. **Use the MCP** - If available, use it to complete the task
.claude/agents/security.md:29:3. **Fallback** - If MCP tools aren't available, use standard tools (Read, Write, Bash, etc.)
.claude/agents/security.md:31:**Common MCPs you might be told to use:**
.claude/agents/security.md:39:Task: "Use these MCPs: supabase, web-search-prime"
.claude/agents/security.md:42:‚úì Checks if those MCP tools are available
.claude/agents/security.md:48:**Note:** You only specify the MCP **name**, not individual tools. You will automatically discover and use the available tools from that MCP.
.claude/agents/security.md:332:- [ ] **Used Supabase MCP** to verify RLS policies
.claude/agents/development.md:17:## MCP Tools
.claude/agents/development.md:19:**You will be told which MCPs to use for each step.**
.claude/agents/development.md:21:**CRITICAL: When told to use an MCP, YOU MUST USE THE MCP TOOLS FIRST**
.claude/agents/development.md:23:**When told to use an MCP (like "Use these MCPs: supabase"):**
.claude/agents/development.md:24:1. **FIRST:** Check if those MCPs are in your available tool set
.claude/agents/development.md:25:2. **USE THE MCP TOOLS** to complete the task
.claude/agents/development.md:26:3. **ONLY** fall back to standard tools (Read, Write, Bash) if MCP tools are NOT available
.claude/agents/development.md:29:- **FIRST ATTEMPT:** Use Supabase MCP tools to directly query the database
.claude/agents/development.md:30:- **VERIFY:** Query the actual database table/schema using MCP tools
.claude/agents/development.md:33:**Common MCPs you might be told to use:**
.claude/agents/development.md:41:Task: "Use these MCPs: supabase"
.claude/agents/development.md:44:‚úì Checks for supabase MCP in available tools
.claude/agents/development.md:45:‚úì USES supabase MCP tools to query the database directly
.claude/agents/development.md:49:**Note:** You only specify the MCP **name**, not individual tools. You will automatically discover and use the available tools from that MCP.
.claude/agents/development.md:52:- **USE SUPABASE MCP TOOLS FIRST** - Query the actual database
.claude/agents/development.md:54:- **ONLY** read type files if MCP tools are unavailable
.claude/agents/development.md:58:## Using Supabase MCP
.claude/agents/development.md:60:**When told to use the "supabase" MCP server:**
.claude/agents/development.md:62:The supabase MCP server provides direct access to your Supabase project. You can use it to:
.claude/agents/development.md:72:**IMPORTANT:** Always use the supabase MCP to verify the actual database state. Don't rely on reading type files or migration files - they may not reflect the current database.
.claude/agents/development.md:119:- Set up Supabase client using Supabase MCP
.claude/agents/development.md:126:### Step 9: MCP Integrations
.claude/agents/development.md:130:- Configure and test Supabase MCP
.claude/agents/development.md:159:- Use available MCP tools when helpful (optional)
.claude/agents/development.md:170:### Using Database MCP (if available):
.claude/agents/development.md:172:// If database MCP (Supabase, Postgres, etc.) is available, use it to:
.claude/agents/development.md:212:2. If database MCP is available, use it to verify/query schema
.claude/agents/development.md:233:## MCP Integration Validation (Step 9)
.claude/agents/development.md:235:**Test available MCP connections (if any):**
.claude/agents/development.md:238:// Check what MCPs are available
.claude/agents/development.md:239:// Use available MCP tools to verify they work
.claude/agents/development.md:240:// If MCPs aren't available, verify standard tools work instead
.claude/agents/development.md:243:**For each available MCP type:**
.claude/agents/development.md:244:- **Database MCPs:** Test query/connection
.claude/agents/development.md:245:- **Web Search MCPs:** Test search functionality
.claude/agents/development.md:246:- **Browser MCPs:** Test browser automation
.claude/agents/development.md:247:- **Deployment MCPs:** Test deployment access
.claude/agents/development.md:249:**If no MCPs available:**
.claude/agents/development.md:260:**If browser MCP (playwright, chrome-devtools) available:**
.claude/agents/development.md:274:2. Navigate to the application using browser MCP
.claude/agents/development.md:287:**If browser MCP not available:** Provide manual testing instructions
.claude/agents/development.md:290:**If expo/mobile MCP available:** Use it for testing
.claude/agents/development.md:298:**If desktop testing MCP available:** Use it
.claude/agents/development.md:318:- [ ] Used available MCP tools when helpful (optional)
.claude/agents/development.md:319:- [ ] Used research tools (MCP or Read) when uncertain
.claude/agents/development.md:337:Remember: You are the foundation builder. Your work sets the stage for all other agents. Focus on clean, well-structured implementations that follow the Maven architecture principles. Use available MCP tools when helpful, but always have a fallback approach using standard tools.
.claude/adrs/004-specialist-agent-coordination.md:98:| 9 | MCP Integration | development-agent | MCP integrations |
.claude/adrs/004-specialist-agent-coordination.md:108:- mcpTools: { step1: ["supabase"], step7: ["supabase"] }
.claude/adrs/004-specialist-agent-coordination.md:114:   Instruction: "Use these MCPs: supabase"
.claude/adrs/004-specialist-agent-coordination.md:115:   *** CRITICAL: MCP TOOLS INSTRUCTION ***
.claude/adrs/004-specialist-agent-coordination.md:116:   You MUST use the Supabase MCP tools for ALL database operations.
.claude/adrs/004-specialist-agent-coordination.md:118:   Query the database DIRECTLY using Supabase MCP tools.
.claude/adrs/004-specialist-agent-coordination.md:124:   Instruction: "Use these MCPs: supabase"
.claude/adrs/004-specialist-agent-coordination.md:125:   *** CRITICAL: MCP TOOLS INSTRUCTION ***
.claude/adrs/004-specialist-agent-coordination.md:126:   You MUST use the Supabase MCP tools for ALL database operations.
.claude/adrs/004-specialist-agent-coordination.md:150:- `.claude/adrs/001-story-level-mcp-assignment.md` - Story-level MCP architecture
.claude/adrs/002-multi-prd-architecture.md:113:- `.claude/adrs/001-story-level-mcp-assignment.md` - Story-level MCP architecture
.claude/adrs/001-story-level-mcp-assignment.md:1:# ADR-001: Story-Level MCP Tool Assignment
.claude/adrs/001-story-level-mcp-assignment.md:11:When implementing Maven Flow, we faced a critical decision about how to assign MCP (Model Context Protocol) tools to specialist agents:
.claude/adrs/001-story-level-mcp-assignment.md:14:- If MCP tools are assigned at the PRD level, all stories inherit the same tools
.claude/adrs/001-story-level-mcp-assignment.md:26:**MCP tools are assigned PER STORY PER STEP in the PRD JSON's `mcpTools` object, NOT at the PRD level.**
.claude/adrs/001-story-level-mcp-assignment.md:28:Each story specifies which MCPs to use for each Maven step:
.claude/adrs/001-story-level-mcp-assignment.md:35:  "mcpTools": {
.claude/adrs/001-story-level-mcp-assignment.md:43:1. **Story-level specificity**: Each story lists its exact MCP requirements
.claude/adrs/001-story-level-mcp-assignment.md:44:2. **Step-level granularity**: Different steps may use different MCPs
.claude/adrs/001-story-level-mcp-assignment.md:45:3. **Simple declaration**: Only list MCP names (e.g., "supabase"), not individual tools
.claude/adrs/001-story-level-mcp-assignment.md:46:4. **Agent auto-discovery**: Agents automatically discover available tools from those MCPs
.claude/adrs/001-story-level-mcp-assignment.md:48:**Important:** You only specify the MCP **name**, not individual tools. The agent will automatically discover and use the available tools from that MCP.
.claude/adrs/001-story-level-mcp-assignment.md:53:- **Context Isolation**: Each story has its own specific MCPs, reducing confusion as context grows
.claude/adrs/001-story-level-mcp-assignment.md:54:- **Precision**: Flow command tells agents exactly which MCPs to use for each step
.claude/adrs/001-story-level-mcp-assignment.md:55:- **No Hallucination**: Prevents agents from "forgetting" which MCPs are available in large contexts
.claude/adrs/001-story-level-mcp-assignment.md:56:- **Granular Control**: Different stories and steps can use different MCPs
.claude/adrs/001-story-level-mcp-assignment.md:57:- **Debuggability**: Easy to see which MCPs are available for each story/step
.claude/adrs/001-story-level-mcp-assignment.md:58:- **Simplicity**: No need to list individual tools - just MCP names
.claude/adrs/001-story-level-mcp-assignment.md:61:- **Manual specification**: PRD creators must specify MCPs for each story
.claude/adrs/001-story-level-mcp-assignment.md:62:- **Larger PRD files**: Each story includes MCP configuration
.claude/adrs/001-story-level-mcp-assignment.md:66:### Alternative 1: PRD-Level MCP Assignment
.claude/adrs/001-story-level-mcp-assignment.md:67:**Description:** Assign MCPs once at the PRD level, all stories inherit them.
.claude/adrs/001-story-level-mcp-assignment.md:70:- Causes context overload as all stories share the same MCP list
.claude/adrs/001-story-level-mcp-assignment.md:71:- Agents may use inappropriate MCPs for specific tasks
.claude/adrs/001-story-level-mcp-assignment.md:75:**Description:** List individual tools within each MCP (e.g., `{ "mcp": "supabase", "tools": ["supabase_query", "supabase_exec"] }`).
.claude/adrs/001-story-level-mcp-assignment.md:79:- Agents automatically discover tools from MCPs anyway
.claude/adrs/001-story-level-mcp-assignment.md:80:- More prone to errors when MCP tools change
.claude/adrs/001-story-level-mcp-assignment.md:82:### Alternative 3: Automatic MCP Discovery
.claude/adrs/001-story-level-mcp-assignment.md:83:**Description:** Automatically discover available MCP tools using `claude mcp list` during flow execution.
.claude/adrs/001-story-level-mcp-assignment.md:88:- Unpredictable behavior as MCP configuration changes
.claude/adrs/001-story-level-mcp-assignment.md:105:      "mcpTools": {
.claude/adrs/001-story-level-mcp-assignment.md:119:2. For each step, read story's `mcpTools` for that step (e.g., `mcpTools.step1`)
.claude/adrs/001-story-level-mcp-assignment.md:120:3. Spawn specialist agent and tell them: "Use these MCPs: supabase"
.claude/adrs/001-story-level-mcp-assignment.md:121:4. Agent checks if those MCPs are in their available tools
.claude/adrs/001-story-level-mcp-assignment.md:122:5. Agent uses those MCPs (or falls back to standard tools if unavailable)
.claude/adrs/001-story-level-mcp-assignment.md:135:- `.claude/shared/mcp-tools.md` - MCP tools reference documentation
.claude/shared/mcp-tools.md:1:# MCP Tools Reference for Maven Flow Agents
.claude/shared/mcp-tools.md:3:This document provides reference for MCP tools used in Maven Flow.
.claude/shared/mcp-tools.md:7:## How MCP Assignment Works
.claude/shared/mcp-tools.md:11:1. **PRD specifies MCPs per step:**
.claude/shared/mcp-tools.md:16:     "mcpTools": {
.claude/shared/mcp-tools.md:23:2. **Flow tells agent:** "Use these MCPs: supabase"
.claude/shared/mcp-tools.md:25:3. **Agent:** Uses the MCP tools they have available
.claude/shared/mcp-tools.md:27:**Important:** You only specify the MCP **name**, not individual tools. The agent will automatically discover and use the available tools from that MCP.
.claude/shared/mcp-tools.md:31:## Common MCPs
.claude/shared/mcp-tools.md:33:| MCP Name | Use For | Examples |
.claude/shared/mcp-tools.md:46:## Supabase MCP
.claude/shared/mcp-tools.md:48:**When told to use the "supabase" MCP server:**
.claude/shared/mcp-tools.md:50:The supabase MCP provides direct access to your Supabase project for database operations.
.claude/shared/mcp-tools.md:52:**What you can do with supabase MCP:**
.claude/shared/mcp-tools.md:62:- Always use the MCP to verify the actual database state
.claude/shared/mcp-tools.md:70:**When you're told to use an MCP:**
.claude/shared/mcp-tools.md:72:1. Check if that MCP is in your available tools
.claude/shared/mcp-tools.md:78:Task: "Use these MCPs: supabase"
.claude/shared/mcp-tools.md:81:‚úì Looks for supabase MCP tools
.claude/shared/mcp-tools.md:90:**In your PRD JSON, specify MCPs per step:**
.claude/shared/mcp-tools.md:99:      "mcpTools": {
.claude/shared/mcp-tools.md:109:- `mcpTools` is optional (omit if no MCPs needed)
.claude/shared/mcp-tools.md:110:- Specify step-by-step which MCPs to use
.claude/shared/mcp-tools.md:111:- Only list MCP **names** (e.g., "supabase"), not individual tools
.claude/shared/mcp-tools.md:112:- Agent will automatically discover and use available tools from those MCPs
.claude/shared/agent-patterns.md:7:## MCP Tool Usage Pattern (CRITICAL)
.claude/shared/agent-patterns.md:9:**When an agent is told to use MCP tools, the instruction MUST appear at the VERY START of the task prompt:**
.claude/shared/agent-patterns.md:12:*** CRITICAL: MCP TOOLS INSTRUCTION ***
.claude/shared/agent-patterns.md:13:You MUST use the Supabase MCP tools for ALL database operations.
.claude/shared/agent-patterns.md:15:Query the database DIRECTLY using Supabase MCP tools.
.claude/shared/agent-patterns.md:21:1. **FIRST:** Use Supabase MCP to query the database directly
.claude/shared/agent-patterns.md:23:3. **DON'T** create scripts - use the MCP server
.claude/shared/agent-patterns.md:24:4. **ONLY** fall back to files if MCP is unavailable
.claude/shared/agent-patterns.md:26:**When told to use "supabase" MCP:**
.claude/shared/agent-patterns.md:77:## Browser Testing Pattern (CRITICAL for playwright, chrome-devtools MCPs)
.claude/shared/agent-patterns.md:79:**When using browser MCPs (playwright, chrome-devtools) for live testing:**
.claude/shared/agent-patterns.md:196:1. **Use web-search-prime MCP** to research:
.claude/shared/agent-patterns.md:472:| 9 | development-agent | MCP Integration - MCP integrations |
.claude/shared/prd-json-schema.md:27:      "mcpTools": {
.claude/shared/prd-json-schema.md:28:        "step1": ["mcp-name-1", "mcp-name-2"],
.claude/shared/prd-json-schema.md:29:        "step7": ["mcp-name-3"]
.claude/shared/prd-json-schema.md:61:| `mcpTools` | object | Yes | Step-based MCP tool mapping. Use `{}` if none. |
.claude/shared/prd-json-schema.md:80:| 9 | development | MCP integration |
.claude/shared/prd-json-schema.md:91:## MCP Tools Format
.claude/shared/prd-json-schema.md:93:The `mcpTools` object maps step numbers to MCP server names:
.claude/shared/prd-json-schema.md:97:  "mcpTools": {
.claude/shared/prd-json-schema.md:105:- Only list MCP **server names** (e.g., "supabase"), not individual tools
.claude/shared/prd-json-schema.md:107:- Use empty object `{}` if no MCPs needed for this story
.claude/shared/prd-json-schema.md:109:### Common MCPs
.claude/shared/prd-json-schema.md:111:| MCP Name | When to Use |
.claude/shared/prd-json-schema.md:116:| `4-5v-mcp` | All steps - Image analysis |
.claude/shared/prd-json-schema.md:180:      "mcpTools": {
.claude/shared/prd-json-schema.md:199:      "mcpTools": {},
.claude/shared/prd-json-schema.md:214:- [ ] `mcpTools` object exists (use `{}` if empty)
.claude/shared/prd-json-schema.md:221:- [ ] MCP names only (not individual tools)
.claude/shared/prd-json-schema.md:222:- [ ] Step-based keys in mcpTools ("step1", "step7", etc.)
.claude/commands/flow-prd.md:55:availableMCPs:
.claude/commands/flow-prd.md:74:**MCP Tools:** []
.claude/commands/flow.md:59:   - Tell agent which MCPs to use (from PRD mcpTools)
.claude/commands/flow.md:88:   - Read story's mcpTools (if specified for each step)
.claude/commands/flow.md:95:   - **Tell agent which MCPs to use with EXPLICIT INSTRUCTIONS at the start of prompt:**
.claude/commands/flow.md:97:     *** CRITICAL: MCP TOOLS INSTRUCTION ***
.claude/commands/flow.md:98:     You MUST use the Supabase MCP tools for ALL database operations.
.claude/commands/flow.md:100:     SCAN FIRST - Use MCP to list/check what exists in the database BEFORE making any changes.
.claude/commands/flow.md:101:     Query the database DIRECTLY using Supabase MCP tools.
.claude/commands/flow.md:104:     MCPs: supabase
.claude/commands/flow.md:288:- Uses testing-agent with chrome-devtools MCP
.claude/commands/flow.md:296:3. Opens application using chrome-devtools MCP
.claude/commands/flow.md:392:5. [MCP Tool Assignment](#mcp-tool-assignment)
.claude/commands/flow.md:395:8. [Required MCPs](#required-mcps)
.claude/commands/flow.md:470:   - Shows MCPs assigned for each step
.claude/commands/flow.md:573:| 9 | development-agent | MCP Integration - Connect MCP tools | ~5-10 min |
.claude/commands/flow.md:595:- Integrate MCP tools
.claude/commands/flow.md:602:- Connects MCP tools (web-search, web-reader, browser)
.claude/commands/flow.md:678:- Browser automation with chrome-devtools MCP
.claude/commands/flow.md:681:- Opens application using chrome-devtools MCP
.claude/commands/flow.md:689:**Required MCP:**
.claude/commands/flow.md:721:**Required MCPs:**
.claude/commands/flow.md:747:## MCP Tool Assignment
.claude/commands/flow.md:749:### What are MCPs?
.claude/commands/flow.md:750:MCPs (Model Context Protocol) extend Claude with external tools like databases, web search, and browser automation.
.claude/commands/flow.md:752:### How MCP Assignment Works
.claude/commands/flow.md:754:**1. PRD specifies MCPs per step:**
.claude/commands/flow.md:759:  "mcpTools": {
.claude/commands/flow.md:766:**2. Flow tells agent which MCPs to use:**
.claude/commands/flow.md:768:*** CRITICAL: MCP TOOLS INSTRUCTION ***
.claude/commands/flow.md:769:You MUST use the Supabase MCP tools for ALL database operations.
.claude/commands/flow.md:770:SCAN FIRST - Use MCP to list/check what exists in the database BEFORE making changes.
.claude/commands/flow.md:771:Query the database DIRECTLY using Supabase MCP tools.
.claude/commands/flow.md:774:MCPs: supabase
.claude/commands/flow.md:777:**3. Agent uses those MCPs:**
.claude/commands/flow.md:778:- Checks if MCPs are available in their tool set
.claude/commands/flow.md:779:- Uses MCP tools directly to query database, run migrations, etc.
.claude/commands/flow.md:780:- Falls back to standard tools only if MCPs unavailable
.claude/commands/flow.md:782:### Available MCPs
.claude/commands/flow.md:784:| MCP Name | Purpose | Steps Used For |
.claude/commands/flow.md:795:**MCP Usage Rules:**
.claude/commands/flow.md:797:- **Query directly** - Use MCP tools, don't read migration files
.claude/commands/flow.md:798:- **Verify in actual database** - Don't trust type files, verify with MCP
.claude/commands/flow.md:799:- **Fall back gracefully** - Use standard tools if MCP unavailable
.claude/commands/flow.md:825:| **9** | development-agent | üü¢ Green | MCP integrations (web-search, web-reader, chrome, expo, supabase) |
.claude/commands/flow.md:880:| 9 | MCP Integration | development-agent | MCP integrations (web-search, web-reader, chrome, expo, supabase) |
.claude/commands/flow.md:893:- mcpTools: { step1: ["supabase"], step7: ["supabase", "web-search-prime"] }
.claude/commands/flow.md:901:   Instruction: "Use these MCPs: supabase"
.claude/commands/flow.md:902:   INSTRUCTION: USE SUPABASE MCP TOOLS to query/verify database directly. DO NOT just read type files.
.claude/commands/flow.md:918:   Instruction: "Use these MCPs: supabase, web-search-prime"
.claude/commands/flow.md:919:   INSTRUCTION: USE SUPABASE MCP TOOLS to query/verify database directly. USE WEB-SEARCH for research.
.claude/commands/flow.md:944:**IMPORTANT: MCP Assignment**
.claude/commands/flow.md:946:The PRD file specifies which MCPs to use for each step:
.claude/commands/flow.md:952:  "mcpTools": {
.claude/commands/flow.md:960:1. Read the PRD's `mcpTools` for the current step
.claude/commands/flow.md:961:2. Tell the agent: "Use these MCPs: [list]"
.claude/commands/flow.md:963:4. If MCPs aren't specified, agent uses standard tools
.claude/commands/flow.md:968:- Just pass the MCP names to the agent
.claude/commands/flow.md:1090:**For ALL web applications with browser MCPs:**
.claude/commands/flow.md:1093:2. **Navigate to application** using browser MCP
.claude/commands/flow.md:1124:## Required MCPs
.claude/commands/flow.md:1126:### Mandatory MCPs for Maven Flow
.claude/commands/flow.md:1128:Maven Flow requires specific MCP servers to be configured for autonomous development and testing to function correctly.
.claude/commands/flow.md:1130:#### Two Mandatory MCPs
.claude/commands/flow.md:1132:**1. Supabase MCP (MANDATORY)**
.claude/commands/flow.md:1139:- **Without Supabase MCP:**
.claude/commands/flow.md:1144:**2. chrome-devtools MCP (MANDATORY)**
.claude/commands/flow.md:1151:- **Without chrome-devtools MCP:**
.claude/commands/flow.md:1157:#### How to Verify MCPs Are Configured
.claude/commands/flow.md:1161:1. **Check Claude Code MCP Settings:**
.claude/commands/flow.md:1163:   - Go to MCP Servers section
.claude/commands/flow.md:1167:2. **Test MCPs are working:**
.claude/commands/flow.md:1169:   - Ask agent to list tables using Supabase MCP
.claude/commands/flow.md:1170:   - Ask agent to open browser using chrome-devtools MCP
.claude/commands/flow.md:1172:3. **If MCPs are missing:**
.claude/commands/flow.md:1174:   - Configure the missing MCP first
.claude/commands/flow.md:1178:#### Optional MCPs (Recommended but Not Required)
.claude/commands/flow.md:1180:| MCP Name | Purpose | When to Include |
.claude/commands/flow.md:1189:**Only include these MCPs if:**
.claude/commands/flow.md:1196:**MANDATORY MCPs (Must Have):**
.claude/commands/flow.md:1201:1. Verify supabase MCP is configured
.claude/commands/flow.md:1202:2. Verify chrome-devtools MCP is configured
.claude/commands/flow.md:1203:3. Test both MCPs work correctly
.claude/commands/flow.md:1206:**Remember:** Without these MCPs, Maven Flow cannot function as designed. Agents will fall back to less reliable methods (reading files instead of querying database, manual testing instead of automated browser testing).
.claude/commands/flow.md:1223:3. Opens application using chrome-devtools MCP
.claude/commands/flow.md:1682:| 9 | mobile-app-agent | Mobile MCP integrations |
.claude/commands/flow.md:1728:1. **Step 1 (dev):** Create table with Supabase MCP, generate types
.claude/commands/flow.md:1831:### MCP Tool Issues
.claude/commands/flow.md:1833:**Agent not using MCP tools:**
.claude/commands/flow.md:1835:1. **Verify MCP is configured:**
.claude/commands/flow.md:1836:   - Check Claude Code MCP settings
.claude/commands/flow.md:1837:   - Ensure MCP server is running
.claude/commands/flow.md:1839:2. **Check PRD mcpTools:**
.claude/commands/flow.md:1841:   "mcpTools": {
.claude/commands/flow.md:1848:   Use these MCPs: supabase
.claude/commands/flow.md:1968:- Always use Supabase MCP for database operations
.claude/commands/flow.md:2008:- **Supabase as single source of truth** - Always use MCP for queries
.claude/commands/flow.md:2126:- mcpTools: { step1: ["supabase"], step7: ["supabase"], step10: [] }
.claude/commands/flow-update.md:72:  Updated: flow-prd.md (enhanced with MCP detection)
.claude/commands/flow-convert.md:26:2. Parses frontmatter (project, branch, availableMCPs)
.claude/commands/flow-convert.md:36:   - Proper `mcpTools` mapping per step
.claude/commands/flow-convert.md:73:  "availableMCPs": ["supabase", "web-search-prime", "chrome-devtools", "web-reader"],
.claude/commands/flow-convert.md:89:      "mcpTools": {
.claude/commands/flow-convert.md:110:| `availableMCPs` | string[] | List of available MCP servers |
.claude/commands/flow-convert.md:124:| `mcpTools` | object | Map of step to MCP tools |
.claude/commands/flow-convert.md:210:### 3. MCP Tools Mapping
.claude/commands/flow-convert.md:212:Each step can specify different MCP tools:
.claude/commands/flow-convert.md:215:"mcpTools": {
.claude/commands/flow-convert.md:222:- `step1`: Use supabase MCP
.claude/commands/flow-convert.md:223:- `step7`: Use supabase AND web-search-prime MCPs
.claude/commands/flow-convert.md:224:- `step10`: No specific MCPs required
.claude/commands/flow-convert.md:240:- MCP tools
.claude/commands/flow-convert.md:262:- `availableMCPs` from environment
.claude/commands/flow-convert.md:283:availableMCPs:
.claude/commands/flow-convert.md:296:**MCP Tools:**
.claude/commands/flow-convert.md:318:  "availableMCPs": ["supabase", "web-search-prime"],
.claude/commands/flow-convert.md:333:      "mcpTools": {
.claude/commands/flow-convert.md:374:- Per-step MCP tool mapping
.claude/commands/flow-mobile.md:209:1. Reads Supabase schema using Supabase MCP
.claude/shared/required-mcps.md:1:# Required MCPs for Maven Flow Projects
.claude/shared/required-mcps.md:3:This document specifies the **MANDATORY MCPs** that must be configured for Maven Flow projects to function correctly.
.claude/shared/required-mcps.md:9:Maven Flow requires certain MCP servers to be available for autonomous development and testing. These MCPs are NOT optional - they are core to the workflow.
.claude/shared/required-mcps.md:13:## Mandatory MCPs
.claude/shared/required-mcps.md:15:### 1. Supabase MCP (REQUIRED)
.claude/shared/required-mcps.md:25:**Without Supabase MCP:**
.claude/shared/required-mcps.md:32:2. Configure MCP in Claude Code settings with your Supabase project
.claude/shared/required-mcps.md:33:3. Verify MCP is available: Check Claude Code MCP server list
.claude/shared/required-mcps.md:43:### 2. chrome-devtools MCP (REQUIRED)
.claude/shared/required-mcps.md:53:**Without chrome-devtools MCP:**
.claude/shared/required-mcps.md:60:1. Install chrome-devtools MCP in Claude Code
.claude/shared/required-mcps.md:62:3. Verify MCP can launch browser and navigate to pages
.claude/shared/required-mcps.md:65:- Step 9 (MCP Integration) - Test browser automation
.claude/shared/required-mcps.md:70:## How to Verify MCPs Are Configured
.claude/shared/required-mcps.md:74:1. **Check Claude Code MCP Settings:**
.claude/shared/required-mcps.md:76:   - Go to MCP Servers section
.claude/shared/required-mcps.md:80:2. **Test MCPs are working:**
.claude/shared/required-mcps.md:82:   - Ask agent to list tables using Supabase MCP
.claude/shared/required-mcps.md:83:   - Ask agent to open browser using chrome-devtools MCP
.claude/shared/required-mcps.md:85:3. **If MCPs are missing:**
.claude/shared/required-mcps.md:87:   - Configure the missing MCP first
.claude/shared/required-mcps.md:93:## MCP Enforcement in PRDs
.claude/shared/required-mcps.md:95:**When creating PRD JSON files, always include these MCPs:**
.claude/shared/required-mcps.md:102:  "mcpTools": {
.claude/shared/required-mcps.md:110:- **ALL database stories** MUST include `"supabase"` in mcpTools
.claude/shared/required-mcps.md:111:- **ALL stories with UI/testing** MUST include `"chrome-devtools"` in mcpTools
.claude/shared/required-mcps.md:112:- **Step 9 (MCP Integration)** should list both MCPs
.claude/shared/required-mcps.md:116:## Optional MCPs (Recommended but Not Required)
.claude/shared/required-mcps.md:118:These MCPs are useful but not mandatory:
.claude/shared/required-mcps.md:120:| MCP Name | Purpose | When to Include |
.claude/shared/required-mcps.md:129:**Only include these MCPs if:**
.claude/shared/required-mcps.md:136:## Troubleshooting MCP Issues
.claude/shared/required-mcps.md:138:### Supabase MCP Not Working
.claude/shared/required-mcps.md:141:- Agent says "Supabase MCP not available"
.claude/shared/required-mcps.md:146:1. Check Supabase project is linked in MCP settings
.claude/shared/required-mcps.md:148:3. Check MCP server is running
.claude/shared/required-mcps.md:151:### chrome-devtools MCP Not Working
.claude/shared/required-mcps.md:159:1. Verify browser path in MCP settings
.claude/shared/required-mcps.md:161:3. Test MCP manually: "Open browser to http://localhost:3000"
.claude/shared/required-mcps.md:168:**MANDATORY MCPs (Must Have):**
.claude/shared/required-mcps.md:172:**OPTIONAL MCPs (Nice to Have):**
.claude/shared/required-mcps.md:181:1. Verify supabase MCP is configured
.claude/shared/required-mcps.md:182:2. Verify chrome-devtools MCP is configured
.claude/shared/required-mcps.md:183:3. Test both MCPs work correctly
.claude/shared/required-mcps.md:186:**Remember:** Without these MCPs, Maven Flow cannot function as designed. Agents will fall back to less reliable methods (reading files instead of querying database, manual testing instead of automated browser testing).