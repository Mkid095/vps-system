     1→'use client';
     2→
     3→import { useEffect, useState } from 'react';
     4→import { useAuth } from '@/lib/store';
     5→import { api } from '@/lib/api';
     6→import type { Organization, Project } from '@/lib/api';
     7→import { ToastContainer } from '@/components/toast-notifications';
     8→
     9→interface VPSStats {
    10→  disk: { used: string; total: string; percent: number };
    11→  cpu: { usage: number };
    12→  ram: { used: string; total: string; percent: number };
    13→  network: { in: string; out: string };
    14→}
    15→
    16→interface DashboardStats {
    17→  organizations: number;
    18→  whatsappInstances: number;
    19→  websites: number;
    20→  projects: number;
    21→}
    22→
    23→export default function DashboardPage() {
    24→  const { user, loading: authLoading } = useAuth();
    25→  const [organizations, setOrganizations] = useState<Organization[]>([]);
    26→  const [projects, setProjects] = useState<Project[]>([]);
    27→  const [dataLoading, setDataLoading] = useState(false);
    28→  const [vpsStats, setVpsStats] = useState<VPSStats>({
    29→    disk: { used: '--', total: '--', percent: 0 },
    30→    cpu: { usage: 0 },
    31→    ram: { used: '--', total: '--', percent: 0 },
    32→    network: { in: '--', out: '--' },
    33→  });
    34→
    35→  useEffect(() => {
    36→    if (user) {
    37→      fetchDashboardData();
    38→      fetchVPSStats();
    39→    }
    40→  }, [user]);
    41→
    42→  const fetchDashboardData = async () => {
    43→    setDataLoading(true);
    44→    try {
    45→      const [orgsResponse, projectsResponse] = await Promise.all([
    46→        api.getOrganizations(),
    47→        api.getProjects(),
    48→      ]);
    49→      setOrganizations(orgsResponse.items);
    50→      setProjects(projectsResponse.items);
    51→    } catch (error) {
    52→      console.error('Failed to fetch dashboard data:', error);
    53→    } finally {
    54→      setDataLoading(false);
    55→    }
    56→  };
    57→
    58→  const fetchVPSStats = async () => {
    59→    try {
    60→      const response = await fetch('/api/vps/stats');
    61→      if (response.ok) {
    62→        const stats = await response.json();
    63→        setVpsStats(stats);
    64→      }
    65→    } catch (error) {
    66→      console.error('Failed to fetch VPS stats:', error);
    67→    }
    68→  };
    69→
    70→  const stats: DashboardStats = {
    71→    organizations: organizations.length,
    72→    whatsappInstances: 0, // Will be calculated when WhatsApp API is ready
    73→    websites: projects.filter(p => p.status === 'active').length,
    74→    projects: projects.length,
    75→  };
    76→
    77→  if (authLoading) {
    78→    return (
    79→      <div className="page-loading">
    80→        <div className="spinner"></div>
    81→        <span className="sr-only">Loading...</span>
    82→      </div>
    83→    );
    84→  }
    85→
    86→  return (
    87→    <div className="dashboard-page">
    88→      {/* Header */}
    89→      <div className="page-header">
    90→        <div>
    91→          <h1 className="page-title">Dashboard</h1>
    92→          <p className="page-subtitle">
    93→            Welcome to NEXT MAVENS VPS
    94→          </p>
    95→        </div>
    96→        <div className="header-actions">
    97→          <a href="/databases" className="btn btn-primary">
    98→            <span className="mono">[+]</span>
    99→            <span>New Project</span>
   100→          </a>
   101→        </div>
   102→      </div>
   103→
   104→      {/* Stats Grid */}
   105→      <div className="stats-grid">
   106→        <StatCard
   107→          title="Organizations"
   108→          value={stats.organizations}
   109→          icon="[O]"
   110→          href="/databases"
   111→        />
   112→        <StatCard
   113→          title="Projects"
   114→          value={stats.projects}
   115→          icon="[P]"
   116→          href="/databases"
   117→        />
   118→        <StatCard
   119→          title="Websites"
   120→          value={stats.websites}
   121→          icon="[W]"
   122→          href="/deploy"
   123→        />
   124→        <StatCard
   125→          title="WhatsApp"
   126→          value={stats.whatsappInstances}
   127→          icon="[C]"
   128→          href="/whatsapp"
   129→        />
   130→      </div>
   131→
   132→      {/* VPS Stats Section */}
   133→      <div className="vps-section">
   134→        <h2 className="section-title">System Resources</h2>
   135→        <div className="vps-stats-grid">
   136→          <VPSStatCard
   137→            title="Disk"
   138→            used={vpsStats.disk.used}
   139→            total={vpsStats.disk.total}
   140→            percent={vpsStats.disk.percent}
   141→            icon="[D]"
   142→          />
   143→          <VPSStatCard
   144→            title="CPU"
   145→            used={`${vpsStats.cpu.usage}%`}
   146→            total="100%"
   147→            percent={vpsStats.cpu.usage}
   148→            icon="[C]"
   149→          />
   150→          <VPSStatCard
   151→            title="RAM"
   152→            used={vpsStats.ram.used}
   153→            total={vpsStats.ram.total}
   154→            percent={vpsStats.ram.percent}
   155→            icon="[R]"
   156→          />
   157→          <NetworkCard
   158→            incoming={vpsStats.network.in}
   159→            outgoing={vpsStats.network.out}
   160→          />
   161→        </div>
   162→      </div>
   163→
   164→      {/* Quick Actions */}
   165→      <div className="quick-actions">
   166→        <h2 className="section-title">Quick Actions</h2>
   167→        <div className="actions-grid">
   168→          <QuickActionCard
   169→            title="New Organization"
   170→            description="Create a new organization"
   171→            icon="[O]"
   172→            href="/databases"
   173→          />
   174→          <QuickActionCard
   175→            title="New WhatsApp"
   176→            description="Connect WhatsApp number"
   177→            icon="[C]"
   178→            href="/whatsapp"
   179→          />
   180→          <QuickActionCard
   181→            title="Deploy Site"
   182→            description="Deploy from GitHub"
   183→            icon="[P]"
   184→            href="/deploy"
   185→          />
   186→          <QuickActionCard
   187→            title="Backup"
   188→            description="Manage backups"
   189→            icon="[B]"
   190→            href="/backup"
   191→          />
   192→        </div>
   193→      </div>
   194→
   195→      {/* Recent Projects */}
   196→      {projects.length > 0 && (
   197→        <div className="recent-projects">
   198→          <h2 className="section-title">Recent Projects</h2>
   199→          <div className="projects-list">
   200→            {projects.slice(0, 5).map((project) => (
   201→              <ProjectCard key={project.id} project={project} organizations={organizations} />
   202→            ))}
   203→          </div>
   204→        </div>
   205→      )}
   206→
   207→      <ToastContainer />
   208→    </div>
   209→  );
   210→}
   211→
   212→function StatCard({ title, value, icon, href }: {
   213→  title: string;
   214→  value: number;
   215→  icon: string;
   216→  href: string;
   217→}) {
   218→  return (
   219→    <a href={href} className="stat-card">
   220→      <div className="stat-header">
   221→        <span className="stat-icon mono">{icon}</span>
   222→        <span className="stat-title">{title}</span>
   223→      </div>
   224→      <div className="stat-value mono">{value}</div>
   225→    </a>
   226→  );
   227→}
   228→
   229→function VPSStatCard({ title, used, total, percent, icon }: {
   230→  title: string;
   231→  used: string;
   232→  total: string;
   233→  percent: number;
   234→  icon: string;
   235→}) {
   236→  return (
   237→    <div className="vps-card">
   238→      <div className="vps-card-header">
   239→        <span className="vps-icon mono">{icon}</span>
   240→        <span className="vps-title">{title}</span>
   241→      </div>
   242→      <div className="vps-values">
   243→        <span className="vps-used mono">{used}</span>
   244→        <span className="text-muted">/</span>
   245→        <span className="vps-total mono">{total}</span>
   246→      </div>
   247→      <div className="vps-progress">
   248→        <div
   249→          className="vps-progress-bar"
   250→          style={{ width: `${Math.min(percent, 100)}%` }}
   251→        />
   252→      </div>
   253→      <div className="vps-percent mono text-muted">{percent}%</div>
   254→    </div>
   255→  );
   256→}
   257→
   258→function NetworkCard({ incoming, outgoing }: {
   259→  incoming: string;
   260→  outgoing: string;
   261→}) {
   262→  return (
   263→    <div className="vps-card network-card">
   264→      <div className="vps-card-header">
   265→        <span className="vps-icon mono">[N]</span>
   266→        <span className="vps-title">Network</span>
   267→      </div>
   268→      <div className="network-values">
   269→        <div className="network-item">
   270→          <span className="network-label text-muted">IN</span>
   271→          <span className="network-value mono">{incoming}</span>
   272→        </div>
   273→        <div className="network-item">
   274→          <span className="network-label text-muted">OUT</span>
   275→          <span className="network-value mono">{outgoing}</span>
   276→        </div>
   277→      </div>
   278→    </div>
   279→  );
   280→}
   281→
   282→function QuickActionCard({ title, description, icon, href }: {
   283→  title: string;
   284→  description: string;
   285→  icon: string;
   286→  href: string;
   287→}) {
   288→  return (
   289→    <a href={href} className="action-card">
   290→      <span className="action-icon mono">{icon}</span>
   291→      <div className="action-content">
   292→        <div className="action-title">{title}</div>
   293→        <div className="action-description text-muted">{description}</div>
   294→      </div>
   295→    </a>
   296→  );
   297→}
   298→
   299→function ProjectCard({ project, organizations }: { project: Project; organizations: Organization[] }) {
   300→  const org = organizations?.find(o => o.id === project.organization_id);
   301→  return (
   302→    <div className="project-card">
   303→      <div className="project-header">
   304→        <span className="project-name mono">{project.slug}</span>
   305→        <ProjectStatus status={project.status} />
   306→      </div>
   307→      <div className="project-org text-muted">{org?.name || 'Unknown'}</div>
   308→    </div>
   309→  );
   310→}
   311→
   312→function ProjectStatus({ status }: { status: string }) {
   313→  const statusConfig: Record<string, { label: string; className: string }> = {
   314→    active: { label: 'ACTIVE', className: 'badge-success' },
   315→    provisioning: { label: 'PROVISIONING', className: 'badge-warning' },
   316→    suspended: { label: 'SUSPENDED', className: 'badge-error' },
   317→    archived: { label: 'ARCHIVED', className: 'badge-primary' },
   318→  };
   319→
   320→  const config = statusConfig[status] || { label: status.toUpperCase(), className: 'badge-primary' };
   321→
   322→  return (
   323→    <span className={`badge ${config.className} mono`}>
   324→      {config.label}
   325→    </span>
   326→  );
   327→}
   328→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
