     1→# Evolution API - WhatsApp Integration v2.3.7
     2→# Multi-instance support for NextMavens Platform
     3→networks:
     4→  evolution-network:
     5→    driver: bridge
     6→    name: evolution-network
     7→
     8→volumes:
     9→  evolution-data:
    10→    name: evolution-data
    11→
    12→services:
    13→  # Evolution API v2.3.7 (pinned for stability)
    14→  evolution:
    15→    image: evolutionapi/evolution-api:v2.3.7
    16→    container_name: evolution-api
    17→    ports:
    18→      - "8080:8080"
    19→    environment:
    20→      # Server Configuration
    21→      SERVER_PORT: 8080
    22→      SERVER_URL: https://nextmavens.cloud
    23→
    24→      # Authentication
    25→      API_KEY: ${EVOLUTION_API_KEY:-your-api-key-here}
    26→      AUTHENTICATION_API_KEY: true
    27→      AUTHENTICATION_TYPE: apikey
    28→
    29→      # Database (Redis)
    30→      REDIS_ENABLED: true
    31→      REDIS_URI: redis://redis:6379
    32→      REDIS_PREFIX: evolution
    33→
    34→      # Instance Configuration
    35→      STORE_SESSION: true
    36→      STORE_MESSAGE: true
    37→      STORE_CHATS: true
    38→      STORE_CONTACTS: true
    39→
    40→      # Webhook Configuration
    41→      WEBHOOK_ENABLED: true
    42→      WEBHOOK_GLOBAL_URL: ${EVOLUTION_WEBHOOK_URL:-https://nextmavens.cloud/api/webhooks/whatsapp}
    43→      WEBHOOK_GLOBAL_WEBHOOK_BY_EVENTS: true
    44→      WEBHOOK_GLOBAL_EVENTS: |
    45→        MESSAGES_UPDATE
    46→        MESSAGES_UPSERT
    47→        SEND_MESSAGE
    48→        CONNECTION_UPDATE
    49→        STATUS_INSTANCE
    50→
    51→      # WhatsApp Configuration
    52→      WA_BUSINESS_TOKEN: ${WA_BUSINESS_TOKEN:-}
    53→
    54→      # S3 Storage (optional, for media files)
    55→      S3_ENABLED: false
    56→
    57→      # Cleanup (keep for 30 days)
    58→      CLEANUP_DAYS: 30
    59→      CLEANUP_SCHEDULE: 0 0 * * *
    60→
    61→    volumes:
    62→      - evolution-data:/evolution/store
    63→    networks:
    64→      - evolution-network
    65→    restart: unless-stopped
    66→    depends_on:
    67→      redis:
    68→        condition: service_healthy
    69→    healthcheck:
    70→      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:8080"]
    71→      interval: 30s
    72→      timeout: 10s
    73→      retries: 3
    74→      start_period: 40s
    75→
    76→  # Redis for Evolution API session storage
    77→  redis:
    78→    image: redis:7-alpine
    79→    container_name: evolution-redis
    80→    ports:
    81→      - "6379:6379"
    82→    command: redis-server --appendonly yes --maxmemory 256mb --maxmemory-policy allkeys-lru
    83→    volumes:
    84→      - evolution-data:/data
    85→    networks:
    86→      - evolution-network
    87→    restart: unless-stopped
    88→    healthcheck:
    89→      test: ["CMD", "redis-cli", "ping"]
    90→      interval: 10s
    91→      timeout: 5s
    92→      retries: 5
    93→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
