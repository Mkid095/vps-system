     1→'use client';
     2→
     3→import { useState, Suspense } from 'react';
     4→import { useRouter, useSearchParams } from 'next/navigation';
     5→import { useAuth } from '@/lib/store';
     6→import { supabase } from '@/lib/supabase';
     7→
     8→function SignInForm() {
     9→  const router = useRouter();
    10→  const searchParams = useSearchParams();
    11→  const { signIn } = useAuth();
    12→  const [email, setEmail] = useState('');
    13→  const [password, setPassword] = useState('');
    14→  const [error, setError] = useState('');
    15→  const [loading, setLoading] = useState(false);
    16→  const [showSignUp, setShowSignUp] = useState(false);
    17→
    18→  // Get redirect URL from query params
    19→  const redirectTo = searchParams.get('redirect') || '/';
    20→
    21→  const handleSubmit = async (e: React.FormEvent) => {
    22→    e.preventDefault();
    23→    setError('');
    24→    setLoading(true);
    25→
    26→    try {
    27→      if (showSignUp) {
    28→        const { error } = await supabase.auth.signUp({
    29→          email,
    30→          password,
    31→        });
    32→        if (error) throw error;
    33→        // After signup, redirect to home or intended destination
    34→        router.push(redirectTo);
    35→      } else {
    36→        await signIn(email, password);
    37→        router.push(redirectTo);
    38→      }
    39→    } catch (err: unknown) {
    40→      if (err instanceof Error) {
    41→        setError(err.message);
    42→      } else {
    43→        setError(showSignUp ? 'Failed to sign up' : 'Failed to sign in');
    44→      }
    45→    } finally {
    46→      setLoading(false);
    47→    }
    48→  };
    49→
    50→  return (
    51→    <div className="flex min-h-screen items-center justify-center bg-gray-50 px-4">
    52→      <div className="w-full max-w-md rounded-lg bg-white p-8 shadow-md">
    53→        <h1 className="mb-6 text-2xl font-bold">
    54→          {showSignUp ? 'Sign Up' : 'Sign In'}
    55→        </h1>
    56→        <p className="mb-6 text-gray-600">
    57→          {showSignUp
    58→            ? 'Create a new account to get started'
    59→            : 'Welcome back to NextMavens Platform'}
    60→        </p>
    61→
    62→        <form onSubmit={handleSubmit}>
    63→          <div className="mb-4">
    64→            <label htmlFor="email" className="mb-2 block text-sm font-medium">
    65→              Email
    66→            </label>
    67→            <input
    68→              type="email"
    69→              id="email"
    70→              value={email}
    71→              onChange={(e) => setEmail(e.target.value)}
    72→              required
    73→              className="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none"
    74→              placeholder="you@example.com"
    75→            />
    76→          </div>
    77→
    78→          <div className="mb-6">
    79→            <label htmlFor="password" className="mb-2 block text-sm font-medium">
    80→              Password
    81→            </label>
    82→            <input
    83→              type="password"
    84→              id="password"
    85→              value={password}
    86→              onChange={(e) => setPassword(e.target.value)}
    87→              required
    88→              minLength={6}
    89→              className="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none"
    90→              placeholder="••••••••"
    91→            />
    92→          </div>
    93→
    94→          {error && (
    95→            <div className="mb-4 rounded-md bg-red-50 p-3 text-red-600">{error}</div>
    96→          )}
    97→
    98→          <button
    99→            type="submit"
   100→            disabled={loading}
   101→            className="w-full rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 disabled:bg-gray-400"
   102→          >
   103→            {loading ? 'Loading...' : showSignUp ? 'Sign Up' : 'Sign In'}
   104→          </button>
   105→        </form>
   106→
   107→        <div className="mt-6 text-center text-sm">
   108→          {showSignUp ? 'Already have an account? ' : "Don't have an account? "}
   109→          <button
   110→            type="button"
   111→            onClick={() => {
   112→              setShowSignUp(!showSignUp);
   113→              setError('');
   114→            }}
   115→            className="text-blue-600 hover:text-blue-800"
   116→          >
   117→            {showSignUp ? 'Sign In' : 'Sign Up'}
   118→          </button>
   119→        </div>
   120→
   121→        <div className="mt-4 text-center">
   122→          <a
   123→            href="/"
   124→            className="text-sm text-gray-600 hover:text-gray-800"
   125→          >
   126→            ← Back to home
   127→          </a>
   128→        </div>
   129→      </div>
   130→    </div>
   131→  );
   132→}
   133→
   134→export default function SignInPage() {
   135→  return (
   136→    <Suspense fallback={
   137→      <div className="flex min-h-screen items-center justify-center bg-gray-50 px-4">
   138→        <div className="text-center">
   139→          <div className="mb-4 h-8 w-8 animate-spin rounded-full border-4 border-gray-200 border-t-blue-600 mx-auto" />
   140→          <p className="text-gray-600">Loading...</p>
   141→        </div>
   142→      </div>
   143→    }>
   144→      <SignInForm />
   145→    </Suspense>
   146→  );
   147→}
   148→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
